---
title: 数据库设计
date: 2025-11-17
permalink: /docs/我的玩具/APP/数据库设计/
categories:
  - Technology
  - Learning
---

APP信息的建表语句：
```sql
CREATE TABLE `app_info` (
  `id` varchar(32) COLLATE utf8mb4_general_ci NOT NULL,
  `appId` varchar(64) COLLATE utf8mb4_general_ci NOT NULL,
  `title` varchar(64) COLLATE utf8mb4_general_ci NOT NULL,
  `url` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `description` text COLLATE utf8mb4_general_ci,
  `icon` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `genres` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `genreIds` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `primaryGenre` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `primaryGenreId` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `contentRating` varchar(10) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `languages` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `size` bigint DEFAULT NULL,
  `requiredOsVersion` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `released` datetime DEFAULT NULL,
  `updated` datetime DEFAULT NULL,
  `releaseNotes` text COLLATE utf8mb4_general_ci,
  `version` varchar(64) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `price` decimal(10,2) DEFAULT NULL,
  `currency` varchar(10) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `free` varchar(1) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `developerId` varchar(32) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `developer` varchar(64) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `developerUrl` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `score` double(5,2) DEFAULT NULL,
  `reviews` int DEFAULT NULL,
  `currentVersionScore` double(5,2) DEFAULT NULL,
  `currentVersionReviews` int DEFAULT NULL,
  `screenshots` text COLLATE utf8mb4_general_ci,
  `ipadScreenshots` text COLLATE utf8mb4_general_ci,
  `appleTvScreenshots` text COLLATE utf8mb4_general_ci,
  `supportedDevices` text COLLATE utf8mb4_general_ci,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci
```

价格历史表
```sql
CREATE TABLE `app_price_history` (
  `id` varchar(32) COLLATE utf8mb4_general_ci NOT NULL,
  `appId` varchar(32) COLLATE utf8mb4_general_ci NOT NULL COMMENT 'app info表的id',
  `date` datetime DEFAULT NULL COMMENT '日期',
  `price` decimal(10,2) DEFAULT NULL COMMENT '价格',
  PRIMARY KEY (`id`),
  KEY `idx_app_price_history_appId_date` (`appId`,`date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci
```

历史优惠表 app_discounts_history

```sql
CREATE TABLE `app_discounts_history` (
  `id` varchar(32) COLLATE utf8mb4_general_ci NOT NULL,
  `appId` varchar(32) COLLATE utf8mb4_general_ci NOT NULL COMMENT 'app info表的id',
  `date` datetime DEFAULT NULL COMMENT '日期',
  `price` decimal(10,2) DEFAULT NULL COMMENT '原始价格',
  `discounts` decimal(10,2) DEFAULT NULL COMMENT '优惠后价格',
  PRIMARY KEY (`id`),
  KEY `idx_app_discounts_history_appId_date` (`appId`,`date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci
```
