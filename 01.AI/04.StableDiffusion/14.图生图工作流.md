---
title: å›¾ç”Ÿå›¾å·¥ä½œæµ
date: 2025-01-15
permalink: /ai/ai-art-stablediffusion/img2img-workflow.html
tags:
  - Stable Diffusion
  - img2img
  - AIç»˜ç”»
  - å·¥ä½œæµ
categories:
  - AIç»˜ç”»
  - Stable Diffusionæ•™ç¨‹
---

# å›¾ç”Ÿå›¾å·¥ä½œæµ

## ğŸ“š æœ¬ç« æ¦‚è¿°

å›¾ç”Ÿå›¾ï¼ˆimg2imgï¼‰æ˜¯ Stable Diffusion çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå…è®¸ä»¥ç°æœ‰å›¾åƒä¸ºåŸºç¡€è¿›è¡Œåˆ›ä½œã€‚æœ¬ç« å°†ç³»ç»Ÿä»‹ç» img2img çš„å„ç§æ¨¡å¼ã€å‚æ•°è°ƒä¼˜ã€å®æˆ˜åº”ç”¨ä»¥åŠå®Œæ•´çš„å·¥ä½œæµç¨‹ã€‚

## 1. img2img åŸºç¡€æ¦‚å¿µ

### 1.1 å·¥ä½œåŸç†

```mermaid
graph LR
    A[img2img<br/>å·¥ä½œåŸç†] --> B[è¾“å…¥å¤„ç†]
    A --> C[å™ªå£°æ·»åŠ ]
    A --> D[å»å™ªé‡å»º]

    subgraph å›¾åƒè¾“å…¥
        B --> B1[åŸå§‹å›¾åƒ]
        B --> B2[å°ºå¯¸è°ƒæ•´]
        B --> B3[ç¼–ç æ½œç©ºé—´]
    end

    subgraph å™ªå£°æ§åˆ¶
        C --> C1[é™å™ªå¼ºåº¦]
        C --> C2[å™ªå£°æ³¨å…¥]
        C --> C3[ä¿¡æ¯ä¿ç•™]
    end

    subgraph é‡å»ºç”Ÿæˆ
        D --> D1[æç¤ºè¯å¼•å¯¼]
        D --> D2[è¿­ä»£å»å™ª]
        D --> D3[è§£ç è¾“å‡º]
    end

    style A fill:#e1f5fe,stroke:#333
    style B fill:#fff3e0,stroke:#333
    style C fill:#e8f5e9,stroke:#333
    style D fill:#fce4ec,stroke:#333
```

**img2img ä¸ txt2img çš„åŒºåˆ«ï¼š**

| ç‰¹æ€§ | txt2img | img2img |
|------|---------|---------|
| è¾“å…¥ | ä»…æç¤ºè¯ | å›¾åƒ + æç¤ºè¯ |
| èµ·ç‚¹ | éšæœºå™ªå£° | åŸå›¾ + éƒ¨åˆ†å™ªå£° |
| æ§åˆ¶æ€§ | è¾ƒä½ | è¾ƒé«˜ |
| ä¸€è‡´æ€§ | å®Œå…¨éšæœº | ä¿ç•™åŸå›¾ç‰¹å¾ |
| ä¸»è¦ç”¨é€” | ä»é›¶åˆ›ä½œ | ä¿®æ”¹/å¢å¼ºç°æœ‰å›¾åƒ |

### 1.2 æ ¸å¿ƒå‚æ•°ï¼šé™å™ªå¼ºåº¦

**Denoising Strengthï¼ˆé™å™ªå¼ºåº¦ï¼‰è¯¦è§£ï¼š**

```mermaid
graph LR
    A[é™å™ªå¼ºåº¦<br/>æ•ˆæœå¯¹æ¯”] --> B[ä½å¼ºåº¦]
    A --> C[ä¸­ç­‰å¼ºåº¦]
    A --> D[é«˜å¼ºåº¦]

    subgraph 0.1-0.3
        B --> B1[ä¿ç•™å¤§éƒ¨åˆ†åŸå›¾]
        B --> B2[è½»å¾®é£æ ¼å˜åŒ–]
        B --> B3[ç»†èŠ‚è°ƒæ•´]
    end

    subgraph 0.4-0.6
        C --> C1[ä¿ç•™æ„å›¾å’Œä¸»ä½“]
        C --> C2[æ˜æ˜¾é£æ ¼è½¬æ¢]
        C --> C3[å¹³è¡¡æ¨èå€¼]
    end

    subgraph 0.7-1.0
        D --> D1[ä»…ä¿ç•™åŸºæœ¬è½®å»“]
        D --> D2[å¤§å¹…åº¦æ”¹å˜]
        D --> D3[æ¥è¿‘é‡æ–°ç”Ÿæˆ]
    end

    style A fill:#e1f5fe,stroke:#333
    style B fill:#c8e6c9,stroke:#333
    style C fill:#fff9c4,stroke:#333
    style D fill:#ffcdd2,stroke:#333
```

**é™å™ªå¼ºåº¦å‚è€ƒè¡¨ï¼š**

| å¼ºåº¦èŒƒå›´ | æ•ˆæœæè¿° | é€‚ç”¨åœºæ™¯ |
|----------|----------|----------|
| 0.1-0.2 | æè½»å¾®å˜åŒ– | è‰²è°ƒå¾®è°ƒã€å»å™ª |
| 0.25-0.35 | è½»åº¦å˜åŒ– | ç»†èŠ‚ä¼˜åŒ–ã€è´¨é‡æå‡ |
| 0.4-0.5 | ä¸­åº¦å˜åŒ– | é£æ ¼è¿ç§»ã€å±€éƒ¨é‡ç»˜ |
| 0.55-0.7 | è¾ƒå¤§å˜åŒ– | é‡æ–°è¯ é‡Šã€åˆ›æ„æ”¹é€  |
| 0.75-0.85 | å¤§å¹…å˜åŒ– | ä¿ç•™æ„å›¾çš„é‡ç»˜ |
| 0.9-1.0 | å‡ ä¹é‡ç»˜ | ä»…å‚è€ƒæ„å›¾ |

### 1.3 Resize æ¨¡å¼

**å›¾åƒå°ºå¯¸è°ƒæ•´æ¨¡å¼ï¼š**

| æ¨¡å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **Just resize** | ç›´æ¥ç¼©æ”¾ | æ¯”ä¾‹ä¸€è‡´æ—¶ä½¿ç”¨ |
| **Crop and resize** | è£å‰ªåç¼©æ”¾ | éœ€è¦ç‰¹å®šæ¯”ä¾‹ |
| **Resize and fill** | ç¼©æ”¾åå¡«å…… | ä¿ç•™å®Œæ•´å†…å®¹ |
| **Just resize (latent upscale)** | æ½œç©ºé—´ç¼©æ”¾ | æ”¾å¤§æ—¶æ¨è |

## 2. img2img æ¨¡å¼è¯¦è§£

### 2.1 åŸºç¡€ img2img

**å·¥ä½œæµç¨‹ï¼š**

```
1. å‡†å¤‡é˜¶æ®µ
   â”œâ”€â”€ é€‰æ‹©æˆ–ä¸Šä¼ å‚è€ƒå›¾
   â”œâ”€â”€ ç¡®å®šç›®æ ‡é£æ ¼/æ•ˆæœ
   â””â”€â”€ ç¼–å†™æç¤ºè¯

2. å‚æ•°è®¾ç½®
   â”œâ”€â”€ é€‰æ‹©åˆé€‚çš„ Checkpoint
   â”œâ”€â”€ è®¾ç½®é™å™ªå¼ºåº¦
   â”œâ”€â”€ è°ƒæ•´å°ºå¯¸å’Œ CFG
   â””â”€â”€ é€‰æ‹©é‡‡æ ·å™¨å’Œæ­¥æ•°

3. è¿­ä»£ä¼˜åŒ–
   â”œâ”€â”€ ç”Ÿæˆåˆç‰ˆ
   â”œâ”€â”€ åˆ†ææ•ˆæœè°ƒæ•´å‚æ•°
   â””â”€â”€ è¾¾åˆ°æ»¡æ„æ•ˆæœ
```

**ç¤ºä¾‹é…ç½®ï¼š**

```
åœºæ™¯: å°†ç…§ç‰‡è½¬æ¢ä¸ºåŠ¨æ¼«é£æ ¼

å‚è€ƒå›¾: äººç‰©ç…§ç‰‡
æç¤ºè¯: anime style, 1girl, beautiful eyes,
        colorful, detailed, masterpiece
è´Ÿå‘æç¤ºè¯: realistic, photo, bad anatomy

å‚æ•°è®¾ç½®:
â”œâ”€â”€ Checkpoint: åŠ¨æ¼«é£æ ¼æ¨¡å‹
â”œâ”€â”€ Denoising: 0.55
â”œâ”€â”€ CFG Scale: 7
â”œâ”€â”€ Steps: 30
â””â”€â”€ Sampler: DPM++ 2M Karras
```

### 2.2 Inpaintï¼ˆå±€éƒ¨é‡ç»˜ï¼‰

```mermaid
graph LR
    A[Inpaint<br/>å·¥ä½œæ¨¡å¼] --> B[è’™ç‰ˆç»˜åˆ¶]
    A --> C[é‡ç»˜è®¾ç½®]
    A --> D[åº”ç”¨åœºæ™¯]

    subgraph è’™ç‰ˆæ“ä½œ
        B --> B1[æ‰‹åŠ¨ç»˜åˆ¶]
        B --> B2[ä¸Šä¼ è’™ç‰ˆ]
        B --> B3[åè½¬è’™ç‰ˆ]
    end

    subgraph å‚æ•°é…ç½®
        C --> C1[Inpaint area]
        C --> C2[Masked content]
        C --> C3[Mask blur]
    end

    subgraph å…¸å‹åº”ç”¨
        D --> D1[ä¿®å¤ç¼ºé™·]
        D --> D2[æ›´æ¢å…ƒç´ ]
        D --> D3[æ·»åŠ å†…å®¹]
    end

    style A fill:#e1f5fe,stroke:#333
    style B fill:#c8e6c9,stroke:#333
    style C fill:#fff9c4,stroke:#333
    style D fill:#f8bbd9,stroke:#333
```

**Inpaint å‚æ•°è¯¦è§£ï¼š**

| å‚æ•° | é€‰é¡¹ | è¯´æ˜ |
|------|------|------|
| **Mask blur** | 0-64 | è’™ç‰ˆè¾¹ç¼˜æ¨¡ç³Šç¨‹åº¦ |
| **Mask mode** | Inpaint masked / not masked | é‡ç»˜è’™ç‰ˆåŒºåŸŸ/éè’™ç‰ˆåŒºåŸŸ |
| **Masked content** | fill / original / latent noise / latent nothing | è’™ç‰ˆåŒºåŸŸåˆå§‹å†…å®¹ |
| **Inpaint area** | Whole picture / Only masked | é‡ç»˜èŒƒå›´ |
| **Only masked padding** | 0-256 | ä»…è’™ç‰ˆæ¨¡å¼çš„æ‰©å±•åƒç´  |

**Masked content é€‰é¡¹å¯¹æ¯”ï¼š**

| é€‰é¡¹ | åŸç† | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **fill** | ç”¨å‘¨å›´é¢œè‰²å¡«å…… | åˆ é™¤/æ›¿æ¢å…ƒç´  |
| **original** | ä¿ç•™åŸå›¾å†…å®¹ | å¾®è°ƒä¿®æ”¹ |
| **latent noise** | æ·»åŠ å™ªå£° | å®Œå…¨é‡ç»˜ |
| **latent nothing** | ç©ºç™½æ½œç©ºé—´ | åˆ›é€ æ€§é‡ç»˜ |

### 2.3 Inpaint Sketch

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- åœ¨è’™ç‰ˆåŒºåŸŸç›´æ¥æ¶‚ç”»é¢œè‰²
- æ¶‚ç”»çš„é¢œè‰²ä¼šå½±å“ç”Ÿæˆç»“æœ
- é€‚åˆæŒ‡å®šé¢œè‰²çš„å±€éƒ¨é‡ç»˜

**ä½¿ç”¨æŠ€å·§ï¼š**

```
åœºæ™¯: ä¿®æ”¹äººç‰©è¡£æœé¢œè‰²

æ­¥éª¤:
1. ä¸Šä¼ åŸå›¾
2. ç»˜åˆ¶è’™ç‰ˆè¦†ç›–è¡£æœåŒºåŸŸ
3. ç”¨ç›®æ ‡é¢œè‰²åœ¨è’™ç‰ˆåŒºåŸŸæ¶‚ç”»
4. æç¤ºè¯ä¸­æ·»åŠ é¢œè‰²æè¿°
5. è®¾ç½®é€‚å½“é™å™ªå¼ºåº¦ (0.4-0.6)
6. ç”Ÿæˆå¹¶å¾®è°ƒ
```

### 2.4 Inpaint Upload

**åŠŸèƒ½è¯´æ˜ï¼š**
- åˆ†å¼€ä¸Šä¼ åŸå›¾å’Œè’™ç‰ˆå›¾
- è’™ç‰ˆå›¾ï¼šç™½è‰²=é‡ç»˜åŒºåŸŸï¼Œé»‘è‰²=ä¿ç•™åŒºåŸŸ
- é€‚åˆç²¾ç¡®æ§åˆ¶æˆ–æ‰¹é‡å¤„ç†

### 2.5 Sketchï¼ˆæ¶‚é¸¦è½¬å›¾ï¼‰

```mermaid
graph LR
    A[Sketch<br/>æ¨¡å¼] --> B[è¾“å…¥æ–¹å¼]
    A --> C[å‚æ•°è°ƒæ•´]
    A --> D[åº”ç”¨åœºæ™¯]

    subgraph æ¶‚é¸¦è¾“å…¥
        B --> B1[ç”»å¸ƒç»˜åˆ¶]
        B --> B2[ä¸Šä¼ è‰å›¾]
        B --> B3[é¢œè‰²æŒ‡å¼•]
    end

    subgraph å…³é”®å‚æ•°
        C --> C1[é™å™ªå¼ºåº¦é«˜]
        C --> C2[è¯¦ç»†æç¤ºè¯]
        C --> C3[åˆé€‚çš„æ¨¡å‹]
    end

    subgraph å…¸å‹ç”¨é€”
        D --> D1[æ¦‚å¿µè®¾è®¡]
        D --> D2[å¿«é€ŸåŸå‹]
        D --> D3[åˆ›æ„æ¢ç´¢]
    end

    style A fill:#e1f5fe,stroke:#333
    style B fill:#fff3e0,stroke:#333
    style C fill:#e8f5e9,stroke:#333
    style D fill:#fce4ec,stroke:#333
```

**Sketch æœ€ä½³å®è·µï¼š**

```
æ¨èè®¾ç½®:
â”œâ”€â”€ Denoising: 0.7-0.9 (æ¶‚é¸¦è¶Šç®€å•ï¼Œå€¼è¶Šé«˜)
â”œâ”€â”€ CFG Scale: 7-10
â”œâ”€â”€ Steps: 30-40
â””â”€â”€ æç¤ºè¯: è¯¦ç»†æè¿°ç›®æ ‡æ•ˆæœ

æŠ€å·§:
â”œâ”€â”€ ç”¨ä¸åŒé¢œè‰²åŒºåˆ†ä¸åŒåŒºåŸŸ
â”œâ”€â”€ æ ‡æ³¨ä¸»è¦è‰²å½©
â”œâ”€â”€ ç²—ç•¥å‹¾å‹’å½¢çŠ¶å³å¯
â””â”€â”€ é…åˆ ControlNet Scribble æ•ˆæœæ›´å¥½
```

## 3. å®æˆ˜å·¥ä½œæµ

### 3.1 ç…§ç‰‡è½¬æ’ç”»

```mermaid
graph LR
    A[ç…§ç‰‡è½¬æ’ç”»<br/>å®Œæ•´æµç¨‹] --> B[é¢„å¤„ç†]
    A --> C[è½¬æ¢å¤„ç†]
    A --> D[åæœŸä¼˜åŒ–]

    subgraph ç´ æå‡†å¤‡
        B --> B1[é€‰æ‹©æ¸…æ™°ç…§ç‰‡]
        B --> B2[è°ƒæ•´æ„å›¾]
        B --> B3[ç¡®å®šç›®æ ‡é£æ ¼]
    end

    subgraph ç”Ÿæˆé˜¶æ®µ
        C --> C1[é€‰æ‹©åˆé€‚æ¨¡å‹]
        C --> C2[ç¼–å†™æç¤ºè¯]
        C --> C3[è°ƒæ•´é™å™ªå¼ºåº¦]
    end

    subgraph æ•ˆæœæå‡
        D --> D1[å±€éƒ¨Inpaint]
        D --> D2[ç»†èŠ‚å¢å¼º]
        D --> D3[é¢œè‰²è°ƒæ•´]
    end

    style A fill:#e1f5fe,stroke:#333
    style B fill:#c8e6c9,stroke:#333
    style C fill:#fff9c4,stroke:#333
    style D fill:#f8bbd9,stroke:#333
```

**è¯¦ç»†æ­¥éª¤ï¼š**

```
Step 1: é¢„å¤„ç†
â”œâ”€â”€ é€‰æ‹©é«˜è´¨é‡ç…§ç‰‡ï¼ˆå…‰çº¿å¥½ã€ä¸»ä½“æ¸…æ™°ï¼‰
â”œâ”€â”€ è£å‰ªåˆ°åˆé€‚æ¯”ä¾‹
â””â”€â”€ è®°å½•åŸå›¾å°ºå¯¸

Step 2: é¦–æ¬¡è½¬æ¢
â”œâ”€â”€ Checkpoint: ç›®æ ‡é£æ ¼æ¨¡å‹
â”œâ”€â”€ æç¤ºè¯: anime style, [åœºæ™¯æè¿°], masterpiece
â”œâ”€â”€ Denoising: 0.5-0.6ï¼ˆé¦–æ¬¡å°è¯•ï¼‰
â”œâ”€â”€ CFG: 7-8
â””â”€â”€ Steps: 25-30

Step 3: æ•ˆæœè¯„ä¼°
â”œâ”€â”€ æ£€æŸ¥æ•´ä½“é£æ ¼è½¬æ¢
â”œâ”€â”€ è¯†åˆ«éœ€è¦ä¿®å¤çš„åŒºåŸŸ
â””â”€â”€ è®°å½•é—®é¢˜ç‚¹

Step 4: å±€éƒ¨ä¼˜åŒ–
â”œâ”€â”€ ä½¿ç”¨ Inpaint ä¿®å¤é—®é¢˜åŒºåŸŸ
â”œâ”€â”€ è°ƒæ•´é¢éƒ¨ç»†èŠ‚
â”œâ”€â”€ ä¼˜åŒ–è¾¹ç¼˜è¿‡æ¸¡

Step 5: æœ€ç»ˆè¾“å‡º
â”œâ”€â”€ å¯é€‰ï¼šHires.fix æ”¾å¤§
â”œâ”€â”€ å¯é€‰ï¼šæ·»åŠ åå¤„ç†æ•ˆæœ
â””â”€â”€ å¯¼å‡ºæœ€ç»ˆæˆå“
```

### 3.2 å›¾åƒä¿®å¤å·¥ä½œæµ

**ç¼ºé™·ä¿®å¤æµç¨‹ï¼š**

```
å¸¸è§ä¿®å¤åœºæ™¯:
â”œâ”€â”€ æ‰‹éƒ¨é—®é¢˜ â†’ Inpaint + æ‰‹éƒ¨ LoRA
â”œâ”€â”€ é¢éƒ¨å˜å½¢ â†’ Inpaint + é¢éƒ¨æç¤ºè¯
â”œâ”€â”€ èƒŒæ™¯æ‚ä¹± â†’ Inpaint + ç®€æ´èƒŒæ™¯æç¤º
â”œâ”€â”€ å¤šä½™è‚¢ä½“ â†’ Inpaint + latent nothing
â””â”€â”€ æœè£…é”™è¯¯ â†’ Inpaint + æ­£ç¡®æœè£…æè¿°

æ¨èå‚æ•°:
â”œâ”€â”€ Mask blur: 8-16
â”œâ”€â”€ Inpaint area: Only masked
â”œâ”€â”€ Padding: 32-64
â”œâ”€â”€ Denoising: 0.4-0.7
â””â”€â”€ Masked content: æ ¹æ®æƒ…å†µé€‰æ‹©
```

### 3.3 å›¾åƒæ”¾å¤§å¢å¼º

```mermaid
graph LR
    A[æ”¾å¤§å¢å¼º<br/>æ–¹æ¡ˆ] --> B[ç›´æ¥æ”¾å¤§]
    A --> C[åˆ†å—æ”¾å¤§]
    A --> D[æ™ºèƒ½æ”¾å¤§]

    subgraph SD Upscale
        B --> B1[è®¾ç½®æ”¾å¤§å€æ•°]
        B --> B2[é€‰æ‹©æ”¾å¤§å™¨]
        B --> B3[è°ƒæ•´é™å™ª]
    end

    subgraph Tiled Diffusion
        C --> C1[åˆ†å—å¤„ç†]
        C --> C2[è¾¹ç¼˜èåˆ]
        C --> C3[å¤§å›¾æ”¯æŒ]
    end

    subgraph Ultimate Upscale
        D --> D1[æ™ºèƒ½é‡ç»˜]
        D --> D2[ç»†èŠ‚å¢å¼º]
        D --> D3[è´¨é‡ä¼˜åŒ–]
    end

    style A fill:#e1f5fe,stroke:#333
    style B fill:#c8e6c9,stroke:#333
    style C fill:#fff9c4,stroke:#333
    style D fill:#f8bbd9,stroke:#333
```

**æ¨èæ”¾å¤§æµç¨‹ï¼š**

```
æ–¹æ¡ˆA: æ ‡å‡†æ”¾å¤§ï¼ˆä¸­ç­‰è´¨é‡éœ€æ±‚ï¼‰
â”œâ”€â”€ ä½¿ç”¨ Extras â†’ é€‰æ‹©æ”¾å¤§å™¨
â”œâ”€â”€ æ”¾å¤§å€æ•°: 2x-4x
â”œâ”€â”€ æ”¾å¤§å™¨: ESRGAN_4x / RealESRGAN
â””â”€â”€ æ— éœ€é‡æ–°ç”Ÿæˆ

æ–¹æ¡ˆB: img2img æ”¾å¤§ï¼ˆé«˜è´¨é‡éœ€æ±‚ï¼‰
â”œâ”€â”€ åœ¨ img2img ä¸­ä¸Šä¼ åŸå›¾
â”œâ”€â”€ è°ƒæ•´åˆ°ç›®æ ‡å°ºå¯¸
â”œâ”€â”€ Denoising: 0.2-0.35
â”œâ”€â”€ å¯æ·»åŠ ç»†èŠ‚å¢å¼ºæç¤ºè¯
â””â”€â”€ ä¿æŒåŸå›¾é£æ ¼

æ–¹æ¡ˆC: Tiled Diffusionï¼ˆè¶…å¤§å›¾éœ€æ±‚ï¼‰
â”œâ”€â”€ å®‰è£… Tiled Diffusion æ‰©å±•
â”œâ”€â”€ è®¾ç½®åˆ†å—å¤§å°å’Œé‡å 
â”œâ”€â”€ é…åˆ ControlNet Tile
â”œâ”€â”€ Denoising: 0.3-0.5
â””â”€â”€ æ˜¾å­˜å‹å¥½ï¼Œæ”¯æŒè¶…å¤§å°ºå¯¸
```

### 3.4 é£æ ¼è¿ç§»å·¥ä½œæµ

**å¤šè½®è¿­ä»£æ³•ï¼š**

```
ç›®æ ‡: å°† A é£æ ¼å›¾åƒè½¬æ¢ä¸º B é£æ ¼

ç¬¬ä¸€è½®: å»ºç«‹åŸºç¡€
â”œâ”€â”€ Denoising: 0.5
â”œâ”€â”€ é£æ ¼æç¤ºè¯: [Bé£æ ¼æè¿°]
â”œâ”€â”€ è§‚å¯Ÿæ•´ä½“è½¬æ¢æ•ˆæœ

ç¬¬äºŒè½®: å¼ºåŒ–é£æ ¼
â”œâ”€â”€ ä½¿ç”¨ç¬¬ä¸€è½®è¾“å‡ºä½œä¸ºè¾“å…¥
â”œâ”€â”€ Denoising: 0.4
â”œâ”€â”€ ä¿æŒæç¤ºè¯ä¸å˜
â”œâ”€â”€ é£æ ¼æ›´åŠ æ˜æ˜¾

ç¬¬ä¸‰è½®: ç»†èŠ‚ä¼˜åŒ–
â”œâ”€â”€ ä½¿ç”¨ç¬¬äºŒè½®è¾“å‡º
â”œâ”€â”€ Denoising: 0.3
â”œâ”€â”€ å¢åŠ ç»†èŠ‚æè¿°è¯
â”œâ”€â”€ ä¿®å¤é—®é¢˜åŒºåŸŸ

æœ€ç»ˆæ£€æŸ¥:
â”œâ”€â”€ æ•´ä½“é£æ ¼ä¸€è‡´æ€§
â”œâ”€â”€ ç»†èŠ‚ä¿æŒå®Œæ•´
â””â”€â”€ æ— æ˜æ˜¾ä¼ªå½±
```

## 4. å‚æ•°è°ƒä¼˜æŠ€å·§

### 4.1 é™å™ªå¼ºåº¦ä¸æ­¥æ•°å…³ç³»

```
å…¬å¼ç†è§£:
å®é™…æ­¥æ•° = æ€»æ­¥æ•° Ã— é™å™ªå¼ºåº¦

ç¤ºä¾‹:
â”œâ”€â”€ Steps: 30, Denoising: 0.5 â†’ å®é™… 15 æ­¥
â”œâ”€â”€ Steps: 40, Denoising: 0.4 â†’ å®é™… 16 æ­¥
â””â”€â”€ Steps: 50, Denoising: 0.6 â†’ å®é™… 30 æ­¥

å»ºè®®:
â”œâ”€â”€ ä½é™å™ªå¼ºåº¦æ—¶ï¼Œå¯é€‚å½“å¢åŠ æ€»æ­¥æ•°
â”œâ”€â”€ é«˜é™å™ªå¼ºåº¦æ—¶ï¼Œä¿æŒæ­£å¸¸æ­¥æ•°å³å¯
â””â”€â”€ å®é™…æ­¥æ•°è¿‡ä½ä¼šå¯¼è‡´è´¨é‡ä¸‹é™
```

### 4.2 CFG Scale åœ¨ img2img ä¸­çš„å½±å“

| CFG å€¼ | æ•ˆæœ | å»ºè®®ä½¿ç”¨åœºæ™¯ |
|--------|------|--------------|
| 3-5 | æ›´è‡ªç„¶ï¼Œæ›´è´´è¿‘åŸå›¾ | ç»†å¾®è°ƒæ•´ |
| 6-8 | å¹³è¡¡æ•ˆæœ | æ—¥å¸¸ä½¿ç”¨ |
| 9-12 | æ›´ä¸¥æ ¼éµå¾ªæç¤ºè¯ | é£æ ¼è½¬æ¢ |
| 12+ | è¿‡åº¦é¥±å’Œé£é™© | ç‰¹æ®Šéœ€æ±‚ |

### 4.3 é‡‡æ ·å™¨é€‰æ‹©

**img2img æ¨èé‡‡æ ·å™¨ï¼š**

| é‡‡æ ·å™¨ | ç‰¹ç‚¹ | æ¨èåœºæ™¯ |
|--------|------|----------|
| **DPM++ 2M Karras** | å¹³è¡¡è´¨é‡ä¸é€Ÿåº¦ | é€šç”¨æ¨è |
| **Euler a** | åˆ›æ„æ€§å¼º | é£æ ¼æ¢ç´¢ |
| **DDIM** | ç¨³å®šä¸€è‡´ | ç²¾ç¡®æ§åˆ¶ |
| **UniPC** | æ”¶æ•›å¿« | å¿«é€Ÿé¢„è§ˆ |

### 4.4 å¸¸è§é—®é¢˜è§£å†³

| é—®é¢˜ | åŸå› åˆ†æ | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| é£æ ¼å˜åŒ–ä¸å¤Ÿ | é™å™ªå¼ºåº¦å¤ªä½ | æé«˜è‡³ 0.5-0.7 |
| åŸå›¾ç‰¹å¾ä¸¢å¤± | é™å™ªå¼ºåº¦å¤ªé«˜ | é™ä½è‡³ 0.3-0.5 |
| è¾¹ç¼˜æ¨¡ç³Š | Inpaint blur è¿‡é«˜ | é™ä½ blur å€¼ |
| é¢œè‰²åå·® | VAE ä¸åŒ¹é… | æ›´æ¢ VAE |
| ç»†èŠ‚ä¸¢å¤± | æ­¥æ•°/å®é™…æ­¥æ•°å¤ªä½ | å¢åŠ æ€»æ­¥æ•° |
| ç”Ÿæˆå†…å®¹ä¸è’™ç‰ˆä¸åŒ¹é… | Inpaint area è®¾ç½® | å°è¯• Only masked |

## 5. é«˜çº§æŠ€å·§

### 5.1 å¤šæ­¥è¿­ä»£ç²¾ä¿®

```mermaid
graph LR
    A[å¤šæ­¥è¿­ä»£<br/>ç­–ç•¥] --> B[ç²—è°ƒé˜¶æ®µ]
    A --> C[ç»†è°ƒé˜¶æ®µ]
    A --> D[ç²¾ä¿®é˜¶æ®µ]

    subgraph ç¬¬ä¸€è½®
        B --> B1[é«˜é™å™ª: 0.6-0.7]
        B --> B2[å»ºç«‹æ•´ä½“æ•ˆæœ]
        B --> B3[å¤šæ¬¡ç”Ÿæˆé€‰ä¼˜]
    end

    subgraph ç¬¬äºŒè½®
        C --> C1[ä¸­é™å™ª: 0.4-0.5]
        C --> C2[å¼ºåŒ–ç›®æ ‡æ•ˆæœ]
        C --> C3[ä¼˜åŒ–ä¸»è¦é—®é¢˜]
    end

    subgraph ç¬¬ä¸‰è½®
        D --> D1[ä½é™å™ª: 0.2-0.3]
        D --> D2[ç²¾ç»†è°ƒæ•´]
        D --> D3[å±€éƒ¨Inpaint]
    end

    style A fill:#e1f5fe,stroke:#333
    style B fill:#fff3e0,stroke:#333
    style C fill:#e8f5e9,stroke:#333
    style D fill:#fce4ec,stroke:#333
```

### 5.2 Seed æŠ€å·§

```
Seed åœ¨ img2img ä¸­çš„åº”ç”¨:

å›ºå®š Seed:
â”œâ”€â”€ ä¿æŒç”Ÿæˆä¸€è‡´æ€§
â”œâ”€â”€ æ–¹ä¾¿å‚æ•°å¯¹æ¯”
â””â”€â”€ å¯å¤ç°ç‰¹å®šæ•ˆæœ

Subseed å˜åŒ–:
â”œâ”€â”€ åœ¨ä¿æŒæ•´ä½“ä¸€è‡´çš„å‰æä¸‹
â”œâ”€â”€ äº§ç”Ÿç»†å¾®å˜åŒ–
â””â”€â”€ Subseed strength æ§åˆ¶å˜åŒ–ç¨‹åº¦

æ‰¹é‡æ¢ç´¢:
â”œâ”€â”€ Seed: -1ï¼ˆéšæœºï¼‰
â”œâ”€â”€ Batch count: 4-8
â””â”€â”€ é€‰æ‹©æœ€ä½³ç»“æœçš„ Seed ç»§ç»­ä¼˜åŒ–
```

### 5.3 é…åˆ ControlNet

**img2img + ControlNet ç»„åˆï¼š**

```
åœºæ™¯: ä¿æŒå§¿åŠ¿çš„é£æ ¼è½¬æ¢

é…ç½®:
â”œâ”€â”€ img2img
â”‚   â”œâ”€â”€ è¾“å…¥: åŸå§‹ç…§ç‰‡
â”‚   â”œâ”€â”€ Denoising: 0.6
â”‚   â””â”€â”€ æç¤ºè¯: ç›®æ ‡é£æ ¼æè¿°
â”‚
â””â”€â”€ ControlNet
    â”œâ”€â”€ é¢„å¤„ç†å™¨: openpose
    â”œâ”€â”€ æ¨¡å‹: control_openpose
    â””â”€â”€ Weight: 0.8

æ•ˆæœ: é£æ ¼è½¬æ¢çš„åŒæ—¶ä¿æŒäººç‰©å§¿åŠ¿
```

### 5.4 Batch æ‰¹é‡å¤„ç†

**æ‰¹é‡å¤„ç†è®¾ç½®ï¼š**

```
æ‰¹é‡ img2img å¤„ç†:

è„šæœ¬é€‰æ‹©: img2img batch

è¾“å…¥è®¾ç½®:
â”œâ”€â”€ Input directory: è¾“å…¥å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„
â”œâ”€â”€ Output directory: è¾“å‡ºæ–‡ä»¶å¤¹è·¯å¾„
â””â”€â”€ Use input image's size: å¯é€‰

ç»Ÿä¸€å‚æ•°:
â”œâ”€â”€ ç»Ÿä¸€çš„æç¤ºè¯
â”œâ”€â”€ ç»Ÿä¸€çš„é™å™ªå¼ºåº¦
â”œâ”€â”€ ç»Ÿä¸€çš„æ¨¡å‹å’Œå‚æ•°
â””â”€â”€ æ‰¹é‡å¤„ç†å®Œæˆ

æ³¨æ„äº‹é¡¹:
â”œâ”€â”€ ç¡®ä¿è¾“å…¥å›¾ç‰‡å°ºå¯¸æ¥è¿‘
â”œâ”€â”€ æç¤ºè¯å°½é‡é€šç”¨
â””â”€â”€ å¯èƒ½éœ€è¦åæœŸç­›é€‰å’Œè°ƒæ•´
```

## 6. åœºæ™¯åŒ–å·¥ä½œæµæ¨¡æ¿

### 6.1 äººåƒç¾åŒ–æ¨¡æ¿

```
ç›®æ ‡: äººåƒç…§ç‰‡é£æ ¼åŒ–ç¾åŒ–

è¾“å…¥: äººç‰©ç…§ç‰‡ï¼ˆæ¸…æ™°æ­£é¢ï¼‰

é…ç½®:
â”œâ”€â”€ Checkpoint: å†™å®/åŠå†™å®æ¨¡å‹
â”œâ”€â”€ Denoising: 0.35-0.45
â”œâ”€â”€ CFG: 6-7
â”œâ”€â”€ Steps: 30

æç¤ºè¯æ¨¡æ¿:
æ­£å‘: beautiful portrait, soft lighting,
      detailed skin, natural makeup,
      professional photography, 8k
è´Ÿå‘: ugly, deformed, bad anatomy,
      blurry, low quality

æµç¨‹:
1. æ•´ä½“è½¬æ¢ (denoising 0.4)
2. Inpaint çœ¼ç› (denoising 0.5)
3. Inpaint çš®è‚¤é—®é¢˜åŒºåŸŸ (denoising 0.4)
4. å¯é€‰: æ”¾å¤§å¢å¼ºç»†èŠ‚
```

### 6.2 åœºæ™¯é£æ ¼åŒ–æ¨¡æ¿

```
ç›®æ ‡: ç…§ç‰‡è½¬åŠ¨æ¼«/æ’ç”»é£æ ¼

è¾“å…¥: é£æ™¯/åŸå¸‚ç…§ç‰‡

é…ç½®:
â”œâ”€â”€ Checkpoint: åŠ¨æ¼«é£æ ¼æ¨¡å‹
â”œâ”€â”€ Denoising: 0.55-0.65
â”œâ”€â”€ CFG: 7-8
â”œâ”€â”€ Steps: 30

æç¤ºè¯æ¨¡æ¿:
æ­£å‘: anime style, makoto shinkai,
      beautiful scenery, detailed background,
      vibrant colors, masterpiece
è´Ÿå‘: realistic, photo, ugly,
      low quality, blurry

å¯é€‰å¢å¼º:
â”œâ”€â”€ ControlNet Canny ä¿æŒè¾¹ç¼˜
â”œâ”€â”€ å¤šè½®è¿­ä»£åŠ æ·±é£æ ¼
â””â”€â”€ Inpaint ä¿®å¤é—®é¢˜åŒºåŸŸ
```

### 6.3 äº§å“å›¾ä¼˜åŒ–æ¨¡æ¿

```
ç›®æ ‡: äº§å“ç…§ç‰‡å¢å¼º/èƒŒæ™¯æ›´æ¢

è¾“å…¥: äº§å“ç…§ç‰‡

é…ç½®:
â”œâ”€â”€ Checkpoint: å†™å®æ¨¡å‹
â”œâ”€â”€ æ¨¡å¼: Inpaintï¼ˆåªé‡ç»˜èƒŒæ™¯ï¼‰
â”œâ”€â”€ Denoising: 0.7-0.9
â”œâ”€â”€ CFG: 7

æç¤ºè¯æ¨¡æ¿:
æ­£å‘: professional product photography,
      clean white background,
      studio lighting, high quality
è´Ÿå‘: dirty, messy, cluttered,
      low quality, blurry

æµç¨‹:
1. ç»˜åˆ¶è’™ç‰ˆè¦†ç›–èƒŒæ™¯ï¼ˆä¿ç•™äº§å“ï¼‰
2. ä½¿ç”¨ "fill" æˆ– "latent noise"
3. ç”Ÿæˆæ–°èƒŒæ™¯
4. å¿…è¦æ—¶è°ƒæ•´è¾¹ç¼˜
```

## 7. æ•ˆç‡æå‡æŠ€å·§

### 7.1 å¿«æ·é”®ä¸æ“ä½œ

| æ“ä½œ | å¿«æ·æ–¹å¼ | è¯´æ˜ |
|------|----------|------|
| ç”Ÿæˆ | Enter / Ctrl+Enter | å¼€å§‹ç”Ÿæˆ |
| ä¸­æ–­ | Interrupt | åœæ­¢å½“å‰ç”Ÿæˆ |
| è·³è¿‡ | Skip | è·³è¿‡å½“å‰æ‰¹æ¬¡ |
| å‘é€åˆ° img2img | å›¾ç‰‡ä¸‹æ–¹æŒ‰é’® | å¿«é€Ÿè¿ç§» |
| åº”ç”¨ä¸Šæ¬¡å‚æ•° | ç²˜è´´æŒ‰é’® | å¿«é€Ÿå¤ç”¨è®¾ç½® |

### 7.2 é¢„è®¾ä¿å­˜

```
å»ºè®®ä¿å­˜çš„é¢„è®¾:

1. å¿«é€Ÿé¢„è§ˆé¢„è®¾
   â”œâ”€â”€ Steps: 15
   â”œâ”€â”€ Denoising: 0.5
   â””â”€â”€ Sampler: UniPC

2. é«˜è´¨é‡è¾“å‡ºé¢„è®¾
   â”œâ”€â”€ Steps: 40
   â”œâ”€â”€ Denoising: 0.4
   â””â”€â”€ Sampler: DPM++ 2M Karras

3. é£æ ¼è½¬æ¢é¢„è®¾
   â”œâ”€â”€ Steps: 30
   â”œâ”€â”€ Denoising: 0.6
   â””â”€â”€ CFG: 8

4. Inpaint ä¿®å¤é¢„è®¾
   â”œâ”€â”€ Mask blur: 12
   â”œâ”€â”€ Inpaint area: Only masked
   â””â”€â”€ Padding: 48
```

### 7.3 å·¥ä½œæµä¼˜åŒ–å»ºè®®

```mermaid
graph LR
    A[æ•ˆç‡ä¼˜åŒ–<br/>å»ºè®®] --> B[å‰æœŸå‡†å¤‡]
    A --> C[ç”Ÿæˆé˜¶æ®µ]
    A --> D[åæœŸå¤„ç†]

    subgraph å‡†å¤‡ä¼˜åŒ–
        B --> B1[é¢„å¤„ç†å›¾åƒ]
        B --> B2[å‡†å¤‡æç¤ºè¯æ¨¡æ¿]
        B --> B3[è®¾ç½®å¸¸ç”¨é¢„è®¾]
    end

    subgraph ç”Ÿæˆä¼˜åŒ–
        C --> C1[å…ˆä½æ­¥æ•°é¢„è§ˆ]
        C --> C2[ç¡®å®šæ–¹å‘åé«˜è´¨é‡]
        C --> C3[åˆ©ç”¨æ‰¹é‡ç”Ÿæˆ]
    end

    subgraph åå¤„ç†ä¼˜åŒ–
        D --> D1[å»ºç«‹ç­›é€‰æ ‡å‡†]
        D --> D2[æ‰¹é‡å¤„ç†ç›¸ä¼¼ä»»åŠ¡]
        D --> D3[è®°å½•æˆåŠŸé…ç½®]
    end

    style A fill:#e1f5fe,stroke:#333
    style B fill:#c8e6c9,stroke:#333
    style C fill:#fff9c4,stroke:#333
    style D fill:#f8bbd9,stroke:#333
```

## 8. æ€»ç»“ä¸é€ŸæŸ¥è¡¨

### 8.1 img2img æ¨¡å¼é€ŸæŸ¥

| æ¨¡å¼ | ä¸»è¦ç”¨é€” | å…³é”®è®¾ç½® |
|------|----------|----------|
| img2img | æ•´ä½“é£æ ¼è½¬æ¢ | Denoising: 0.4-0.6 |
| Inpaint | å±€éƒ¨ä¿®æ”¹/ä¿®å¤ | Mask blur: 8-16 |
| Inpaint Sketch | æŒ‡å®šé¢œè‰²é‡ç»˜ | é…åˆé¢œè‰²æç¤ºè¯ |
| Sketch | æ¶‚é¸¦è½¬å›¾åƒ | Denoising: 0.7-0.9 |

### 8.2 é™å™ªå¼ºåº¦é€ŸæŸ¥

| ç›®æ ‡ | æ¨èé™å™ªå¼ºåº¦ |
|------|--------------|
| è½»å¾®è°ƒè‰²/å»å™ª | 0.1-0.2 |
| ç»†èŠ‚ä¼˜åŒ– | 0.25-0.35 |
| é£æ ¼è¿ç§» | 0.45-0.6 |
| åˆ›æ„æ”¹é€  | 0.65-0.8 |
| åŸºæœ¬é‡ç»˜ | 0.85-1.0 |

### 8.3 Inpaint è®¾ç½®é€ŸæŸ¥

| åœºæ™¯ | Masked content | Inpaint area | Denoising |
|------|----------------|--------------|-----------|
| åˆ é™¤å…ƒç´  | fill | Only masked | 0.7-0.9 |
| æ›¿æ¢å…ƒç´  | latent noise | Only masked | 0.6-0.8 |
| å¾®è°ƒä¿®æ”¹ | original | Whole picture | 0.4-0.5 |
| æ‰©å±•å›¾åƒ | fill | Only masked | 0.8-1.0 |

---

**æœ¬ç« è¦ç‚¹å›é¡¾ï¼š**
- img2img æ˜¯ä»¥å›¾åƒä¸ºåŸºç¡€çš„äºŒæ¬¡åˆ›ä½œæ ¸å¿ƒåŠŸèƒ½
- é™å™ªå¼ºåº¦æ˜¯æ§åˆ¶å˜åŒ–ç¨‹åº¦çš„å…³é”®å‚æ•°
- Inpaint æ˜¯ç²¾ç¡®æ§åˆ¶å±€éƒ¨é‡ç»˜çš„åˆ©å™¨
- å¤šè½®è¿­ä»£æ˜¯è·å¾—é«˜è´¨é‡ç»“æœçš„æœ‰æ•ˆæ–¹æ³•
- åˆç†çš„å·¥ä½œæµç¨‹èƒ½å¤§å¹…æå‡æ•ˆç‡

**ä¸‹ä¸€ç« é¢„å‘Šï¼š** å¸¸ç”¨æ’ä»¶æ¨è - æŒæ¡æå‡æ•ˆç‡å’Œæ•ˆæœçš„å¿…å¤‡æ‰©å±•
