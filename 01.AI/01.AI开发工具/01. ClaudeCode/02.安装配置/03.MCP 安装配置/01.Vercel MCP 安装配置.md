---
title: Vercel MCP 安装配置指南
date: 2025-01-19
permalink: /ai/claude-code/vercel-mcp-setup.html
categories:
  - Claude Code
tags:
  - Claude Code
---

# Vercel MCP 安装配置指南

Vercel MCP（Model Context Protocol）服务器是一个官方提供的 MCP 实现，允许 Claude Code 与 Vercel 平台进行深度集成。通过配置 Vercel MCP，用户可以在 Claude Code 中直接操作 Vercel 项目、部署应用、查看日志等。

## 快速安装

### 方式一：使用命令行安装（推荐）

在终端执行以下命令：

```bash
claude mcp add --transport http vercel https://mcp.vercel.com
```

**命令解析：**

- `claude mcp add`：为 Claude 客户端新增一个 MCP 服务
- `--transport http`：使用 HTTP 作为通信协议（而非 stdio）
- `vercel`：此 MCP 服务的名称（可自定义修改）
- `https://mcp.vercel.com`：官方 Vercel MCP Server 的地址

### 配置文件位置

安装完成后，配置会自动写入到配置文件中：

```
~/.claude.json
```

配置示例：

```json
{
  "mcpServers": {
    "vercel": {
      "transport": "http",
      "url": "https://mcp.vercel.com"
    }
  }
}
```

## 授权配置

### 连接 MCP 服务

1. 打开 Claude Code 终端
2. 执行命令查看 MCP 服务列表：

```bash
/mcp
```

3. 找到 `vercel` 服务后点击 **连接**
4. 系统会自动跳转到 Vercel 的 OAuth 授权页面
5. 在授权页面选择要授权的 Vercel 账号或团队
6. 点击 **授权** 完成配置

### 授权说明

授权后，Claude Code 将获得以下权限：

- ✅ 读取项目列表和配置
- ✅ 查看部署状态和日志
- ✅ 创建和管理部署
- ✅ 访问环境变量（受限）
- ✅ 操作域名配置

## 验证安装

授权完成后，您可以通过以下方式验证 MCP 服务是否正常工作：

### 1. 检查连接状态

```bash
/mcp status
```

应该看到 `vercel` 服务显示为 **已连接**。

### 2. 测试基本功能

在 Claude Code 中直接询问：

```
列出我的 Vercel 项目
```

或者

```
查看我最近的部署
```

如果返回了正确的项目列表或部署信息，说明配置成功。

## 常见功能

配置完成后，您可以使用以下功能：

### 项目管理

```bash
# 列出所有项目
请列出我的 Vercel 项目

# 查看项目详情
查看项目 my-app 的配置

# 创建新项目
帮我创建一个新的 Next.js 项目
```

### 部署管理

```bash
# 部署当前项目
将当前项目部署到 Vercel

# 查看部署日志
查看最新部署的构建日志

# 回滚部署
回滚到上一个部署版本
```

### 环境变量

```bash
# 查看环境变量（敏感信息会被隐藏）
显示项目的环境变量

# 添加环境变量
添加环境变量 API_KEY
```

## 故障排查

### 问题 1：授权失败

**症状：** 点击连接后无法跳转到授权页面

**解决方案：**
1. 检查网络连接，确保可以访问 `vercel.com`
2. 清除浏览器缓存后重试
3. 尝试使用其他浏览器

### 问题 2：连接断开

**症状：** MCP 服务显示为未连接状态

**解决方案：**
```bash
# 重新连接
/mcp connect vercel

# 或重新授权
/mcp reconnect vercel
```

### 问题 3：权限不足

**症状：** 执行操作时提示权限不足

**解决方案：**
1. 在 Vercel 控制台检查团队权限设置
2. 确保授权时选择了正确的团队账号
3. 重新进行授权，确保勾选了所需权限

## 高级配置

### 自定义 MCP 名称

如果您需要连接多个 Vercel 账号，可以使用不同的名称：

```bash
claude mcp add --transport http vercel-personal https://mcp.vercel.com
claude mcp add --transport http vercel-company https://mcp.vercel.com
```

### 配置超时时间

编辑 `~/.claude.json`，添加超时配置：

```json
{
  "mcpServers": {
    "vercel": {
      "transport": "http",
      "url": "https://mcp.vercel.com",
      "timeout": 30000
    }
  }
}
```

### 使用环境变量

您也可以通过环境变量传递 Vercel Token：

```bash
export VERCEL_TOKEN="your-token-here"
```

然后在配置中引用：

```json
{
  "mcpServers": {
    "vercel": {
      "transport": "http",
      "url": "https://mcp.vercel.com",
      "env": {
        "VERCEL_TOKEN": "${VERCEL_TOKEN}"
      }
    }
  }
}
```

## 安全建议

1. ⚠️ **不要在公共仓库中提交** `.claude.json` 文件
2. ⚠️ **定期轮换** Vercel Access Token
3. ⚠️ **使用团队权限管理** 限制 MCP 的访问范围
4. ⚠️ **启用双因素认证** 保护 Vercel 账号安全

