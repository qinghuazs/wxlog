---
title: Claude Codeæ¶æ„è¯¦è§£ï¼ˆäºŒåï¼‰ï¼šæ„å»ºè‡ªå·±çš„AIç¼–ç¨‹åŠ©æ‰‹
date: 2025-01-22
permalink: /ai/claude-code/architecture-20-build-your-own-ai-assistant.html
tags:
  - Claude Code
categories:
  - Claude Code
---

# æ„å»ºè‡ªå·±çš„AIç¼–ç¨‹åŠ©æ‰‹

## ä¸€ã€å¼•è¨€

### 1.1 ç³»åˆ—å›é¡¾

æ¬¢è¿æ¥åˆ°ã€ŠClaude Codeæ¶æ„è¯¦è§£ã€‹ç³»åˆ—çš„æœ€åä¸€ç¯‡ï¼åœ¨è¿‡å»çš„19ç¯‡æ–‡ç« ä¸­,æˆ‘ä»¬ä»æ¶æ„è®¾è®¡åˆ°å…·ä½“å®ç°,å…¨é¢å‰–æäº†Claude Codeçš„æŠ€æœ¯å†…å¹•:

**æ¶æ„ç¯‡ï¼ˆ1-5ï¼‰**:
- ç¬¬1ç¯‡ï¼šæ•´ä½“æ¶æ„è®¾è®¡ - åˆ†å±‚æ¶æ„ã€æŠ€æœ¯æ ˆé€‰å‹
- ç¬¬2ç¯‡ï¼šæ ¸å¿ƒå¼•æ“å®ç° - AIå¼•æ“ã€Promptå·¥ç¨‹
- ç¬¬3ç¯‡ï¼šä¸Šä¸‹æ–‡ç®¡ç†ç³»ç»Ÿ - Tokenç®¡ç†ã€æ™ºèƒ½æˆªæ–­
- ç¬¬4ç¯‡ï¼šä¼šè¯ä¸çŠ¶æ€ç®¡ç† - æŒä¹…åŒ–ã€ä¼šè¯æ¢å¤
- ç¬¬5ç¯‡ï¼šå·¥å…·ç³»ç»Ÿæ¶æ„ - Tool Callingã€å·¥å…·æ³¨å†Œ

**å·¥å…·å®ç°ç¯‡ï¼ˆ6-8ï¼‰**:
- ç¬¬6ç¯‡ï¼šæ–‡ä»¶æ“ä½œå·¥å…· - Readã€Writeã€Edit
- ç¬¬7ç¯‡ï¼šä»£ç æœç´¢ä¸åˆ†æ - Globã€Grep
- ç¬¬8ç¯‡ï¼šç»ˆç«¯é›†æˆå®ç° - Bashã€å‘½ä»¤æ‰§è¡Œ

**åè®®ä¸é›†æˆç¯‡ï¼ˆ9-12ï¼‰**:
- ç¬¬9ç¯‡ï¼šMCPåè®®æ·±å…¥è§£æ - åè®®è§„èŒƒã€é€šä¿¡æœºåˆ¶
- ç¬¬10ç¯‡ï¼šæµè§ˆå™¨è‡ªåŠ¨åŒ–é›†æˆ - Playwrighté›†æˆ
- ç¬¬11ç¯‡ï¼šAgentå·¥ä½œæµå¼•æ“ - ä»»åŠ¡åˆ†è§£ã€æ‰§è¡Œå¼•æ“
- ç¬¬12ç¯‡ï¼šå¤šæ¨¡æ€äº¤äº’å®ç° - å›¾åƒã€PDFå¤„ç†

**ä¼˜åŒ–ä¸å·¥ç¨‹ç¯‡ï¼ˆ13-16ï¼‰**:
- ç¬¬13ç¯‡ï¼šæ€§èƒ½ä¼˜åŒ–æ·±åº¦å‰–æ - ç¼“å­˜ã€å¹¶å‘ã€å†…å­˜
- ç¬¬14ç¯‡ï¼šé”™è¯¯å¤„ç†ä¸æ¢å¤ - é‡è¯•ã€é™çº§ã€å®¹é”™
- ç¬¬15ç¯‡ï¼šå®‰å…¨æœºåˆ¶è®¾è®¡ - æƒé™æ§åˆ¶ã€æ²™ç®±
- ç¬¬16ç¯‡ï¼šæµ‹è¯•ä¸è´¨é‡ä¿è¯ - å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•

**å®æˆ˜ç¯‡ï¼ˆ17-19ï¼‰**:
- ç¬¬17ç¯‡ï¼šè‡ªå®šä¹‰å·¥å…·å¼€å‘å®æˆ˜ - 3ä¸ªå®Œæ•´æ¡ˆä¾‹
- ç¬¬18ç¯‡ï¼šMCP Serverå¼€å‘å®æˆ˜ - Serveræ¶æ„
- ç¬¬19ç¯‡ï¼šä¼ä¸šçº§åº”ç”¨å®è·µ - éƒ¨ç½²ã€ç›‘æ§

### 1.2 ä¸ºä»€ä¹ˆè¦æ„å»ºè‡ªå·±çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Ÿ

**å•†ä¸šä»·å€¼**:
- ğŸ’° å®šåˆ¶åŒ–æœåŠ¡ï¼šæ ¹æ®ç‰¹å®šè¡Œä¸šå’Œåœºæ™¯ä¼˜åŒ–
- ğŸ’° æ•°æ®å®‰å…¨ï¼šæ•æ„Ÿä»£ç ä¸å‡ºä¼ä¸šå†…ç½‘
- ğŸ’° æˆæœ¬æ§åˆ¶ï¼šè‡ªä¸»é€‰æ‹©AIæ¨¡å‹å’Œè®¡è´¹æ–¹å¼
- ğŸ’° ç«äº‰ä¼˜åŠ¿ï¼šæ‰“é€ å·®å¼‚åŒ–äº§å“

**æŠ€æœ¯ä»·å€¼**:
- ğŸš€ æ·±å…¥ç†è§£AIåº”ç”¨æ¶æ„
- ğŸš€ æŒæ¡å…¨æ ˆå¼€å‘èƒ½åŠ›
- ğŸš€ ç§¯ç´¯å·¥ç¨‹å®è·µç»éªŒ
- ğŸš€ å¼€æºè´¡çŒ®å’Œç¤¾åŒºå½±å“åŠ›

**å­¦ä¹ ä»·å€¼**:
- ğŸ“š ç³»ç»Ÿæ€§æ•´åˆå‰é¢çš„çŸ¥è¯†
- ğŸ“š ç†è®ºç»“åˆå®è·µ
- ğŸ“š åŸ¹å…»æ¶æ„æ€ç»´
- ğŸ“š æå‡é—®é¢˜è§£å†³èƒ½åŠ›

### 1.3 æœ¬æ–‡ç›®æ ‡

é€šè¿‡æœ¬æ–‡ï¼Œä½ å°†å­¦ä¼š:

- âœ… å¦‚ä½•ä»é›¶å¼€å§‹è®¾è®¡ä¸€ä¸ªAIç¼–ç¨‹åŠ©æ‰‹
- âœ… å®Œæ•´çš„MVPå®ç°ï¼ˆå¯ç›´æ¥è¿è¡Œï¼‰
- âœ… å‰ç«¯ã€åç«¯ã€AIå¼•æ“çš„å…¨æ ˆå¼€å‘
- âœ… éƒ¨ç½²ä¸Šçº¿çš„å®Œæ•´æµç¨‹
- âœ… å•†ä¸šåŒ–çš„æ€è·¯å’Œå®šä»·ç­–ç•¥

**æœ¬æ–‡ç‰¹è‰²**:
- ğŸ“¦ å®Œæ•´å¯è¿è¡Œçš„ä»£ç ï¼ˆ8000+è¡Œï¼‰
- ğŸ¯ ä»è®¾è®¡åˆ°éƒ¨ç½²çš„å…¨æµç¨‹
- ğŸ’¡ ä¸°å¯Œçš„æ¶æ„å›¾å’Œæµç¨‹å›¾
- ğŸ”§ ç”Ÿäº§çº§çš„å·¥ç¨‹å®è·µ
- ğŸ’° å®ç”¨çš„å•†ä¸šåŒ–å»ºè®®


## äºŒã€æ¶æ„è®¾è®¡

### 3.1 æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    subgraph "å®¢æˆ·ç«¯"
        U1[Webæµè§ˆå™¨]
        U2[CLIç»ˆç«¯]
        U3[VS Codeæ’ä»¶]
    end

    subgraph "APIç½‘å…³"
        G1[Nginxåå‘ä»£ç†]
        G2[è´Ÿè½½å‡è¡¡]
        G3[SSLç»ˆæ­¢]
    end

    subgraph "åº”ç”¨æœåŠ¡å™¨"
        A1[Express API Server]
        A2[Socket.IO Server]
        A3[è®¤è¯ä¸­é—´ä»¶]
        A4[é™æµä¸­é—´ä»¶]
    end

    subgraph "ä¸šåŠ¡å±‚"
        B1[ä¼šè¯ç®¡ç†æœåŠ¡]
        B2[AIå¼•æ“æœåŠ¡]
        B3[å·¥å…·æ‰§è¡ŒæœåŠ¡]
        B4[æ–‡ä»¶ç®¡ç†æœåŠ¡]
    end

    subgraph "ä»»åŠ¡é˜Ÿåˆ—"
        Q1[Bull Queue]
        Q2[Workerè¿›ç¨‹]
    end

    subgraph "æ•°æ®å±‚"
        D1[(PostgreSQL)]
        D2[(Redis)]
        D3[S3å­˜å‚¨]
    end

    subgraph "å¤–éƒ¨æœåŠ¡"
        E1[Anthropic API]
        E2[GitHub API]
        E3[å…¶ä»–API]
    end

    U1 --> G1
    U2 --> G1
    U3 --> G1

    G1 --> G2
    G2 --> A1
    G2 --> A2

    A1 --> A3
    A1 --> A4
    A2 --> A3

    A1 --> B1
    A1 --> B2
    A1 --> B3
    A1 --> B4

    B2 --> Q1
    Q1 --> Q2
    Q2 --> B2

    B1 --> D1
    B2 --> D2
    B4 --> D3

    B2 --> E1
    B3 --> E2
    B3 --> E3

    style B2 fill:#ffe1f5,stroke:#333,stroke-width:2px
    style Q1 fill:#e1f5ff,stroke:#333,stroke-width:2px
```

### 3.2 æ ¸å¿ƒæ¨¡å—åˆ’åˆ†

#### **æ¨¡å—ä¸€ï¼šä¼šè¯ç®¡ç†ï¼ˆSession Managerï¼‰**

**èŒè´£**:
- åˆ›å»ºã€æ¢å¤ã€åˆ é™¤ä¼šè¯
- ç®¡ç†ä¼šè¯çŠ¶æ€å’Œå…ƒæ•°æ®
- å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç»´æŠ¤

**æ ¸å¿ƒæ¥å£**:
```typescript
interface SessionManager {
  // åˆ›å»ºä¼šè¯
  createSession(userId: string, config?: SessionConfig): Promise<Session>;

  // æ¢å¤ä¼šè¯
  getSession(sessionId: string): Promise<Session>;

  // æ›´æ–°ä¼šè¯
  updateSession(sessionId: string, data: Partial<Session>): Promise<void>;

  // åˆ é™¤ä¼šè¯
  deleteSession(sessionId: string): Promise<void>;

  // åˆ—å‡ºä¼šè¯
  listSessions(userId: string, options?: ListOptions): Promise<Session[]>;
}

interface Session {
  id: string;
  userId: string;
  title: string;
  messages: Message[];
  context: ContextData;
  metadata: Record<string, any>;
  createdAt: Date;
  updatedAt: Date;
}
```

#### **æ¨¡å—äºŒï¼šAIå¼•æ“ï¼ˆAI Engineï¼‰**

**èŒè´£**:
- ä¸AIæ¨¡å‹é€šä¿¡
- å¤„ç†æµå¼å“åº”
- ç®¡ç†å·¥å…·è°ƒç”¨
- ä¸Šä¸‹æ–‡ä¼˜åŒ–

**æ ¸å¿ƒæ¥å£**:
```typescript
interface AIEngine {
  // å¤„ç†æ¶ˆæ¯
  processMessage(
    session: Session,
    message: string,
    options?: ProcessOptions
  ): AsyncIterable<AIResponse>;

  // æ‰§è¡Œå·¥å…·
  executeTool(
    toolName: string,
    params: any
  ): Promise<ToolResult>;

  // ç®¡ç†ä¸Šä¸‹æ–‡
  optimizeContext(
    messages: Message[],
    tokenBudget: number
  ): Message[];
}

interface AIResponse {
  type: 'text' | 'tool_use' | 'error';
  content: string;
  toolCall?: ToolCall;
}
```

#### **æ¨¡å—ä¸‰ï¼šå·¥å…·ç³»ç»Ÿï¼ˆTool Systemï¼‰**

**èŒè´£**:
- å·¥å…·æ³¨å†Œå’Œç®¡ç†
- å·¥å…·å‚æ•°éªŒè¯
- å·¥å…·æ‰§è¡Œå’Œç»“æœæ ¼å¼åŒ–
- å·¥å…·æƒé™æ§åˆ¶

**æ ¸å¿ƒæ¥å£**:
```typescript
interface ToolSystem {
  // æ³¨å†Œå·¥å…·
  registerTool(tool: ToolDefinition, executor: ToolExecutor): void;

  // æ‰§è¡Œå·¥å…·
  executeTool(name: string, params: any): Promise<ToolResult>;

  // è·å–æ‰€æœ‰å·¥å…·
  getAllTools(): ToolDefinition[];

  // æ£€æŸ¥æƒé™
  checkPermission(toolName: string, userId: string): boolean;
}

interface ToolDefinition {
  name: string;
  description: string;
  input_schema: JSONSchema;
  requiredPermissions?: string[];
}
```

#### **æ¨¡å—å››ï¼šæ–‡ä»¶ç®¡ç†ï¼ˆFile Managerï¼‰**

**èŒè´£**:
- å·¥ä½œåŒºæ–‡ä»¶ç®¡ç†
- æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½
- ç‰ˆæœ¬æ§åˆ¶é›†æˆ
- æ–‡ä»¶æœç´¢å’Œç´¢å¼•

**æ ¸å¿ƒæ¥å£**:
```typescript
interface FileManager {
  // è¯»å–æ–‡ä»¶
  readFile(path: string): Promise<string>;

  // å†™å…¥æ–‡ä»¶
  writeFile(path: string, content: string): Promise<void>;

  // åˆ—å‡ºæ–‡ä»¶
  listFiles(directory: string, pattern?: string): Promise<FileInfo[]>;

  // æœç´¢å†…å®¹
  searchContent(pattern: string, options?: SearchOptions): Promise<SearchResult[]>;
}
```

### 3.3 æ•°æ®æµè®¾è®¡

```mermaid
sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant API as API Server
    participant Session as ä¼šè¯ç®¡ç†
    participant AI as AIå¼•æ“
    participant Tool as å·¥å…·ç³»ç»Ÿ
    participant DB as æ•°æ®åº“

    Client->>API: å‘é€æ¶ˆæ¯
    API->>Session: è·å–ä¼šè¯
    Session->>DB: æŸ¥è¯¢ä¼šè¯æ•°æ®
    DB-->>Session: è¿”å›ä¼šè¯
    Session-->>API: ä¼šè¯å¯¹è±¡

    API->>AI: å¤„ç†æ¶ˆæ¯
    Note over AI: ä¼˜åŒ–ä¸Šä¸‹æ–‡<br/>æ„é€ APIè¯·æ±‚

    AI->>AI: è°ƒç”¨Claude API

    loop æµå¼å“åº”
        AI-->>Client: SSE: æ–‡æœ¬ç‰‡æ®µ
    end

    alt éœ€è¦å·¥å…·è°ƒç”¨
        AI->>Tool: æ‰§è¡Œå·¥å…·
        Tool->>Tool: å‚æ•°éªŒè¯
        Tool->>Tool: æ‰§è¡Œæ“ä½œ
        Tool-->>AI: å·¥å…·ç»“æœ

        AI->>AI: ç»§ç»­ç”Ÿæˆ
        loop ç»§ç»­æµå¼å“åº”
            AI-->>Client: SSE: åç»­æ–‡æœ¬
        end
    end

    API->>Session: ä¿å­˜å¯¹è¯
    Session->>DB: æ›´æ–°ä¼šè¯
    DB-->>Session: ç¡®è®¤
    Session-->>API: å®Œæˆ
    API-->>Client: ç»“æŸæ ‡è®°
```


## ä¸‰ã€é«˜çº§ç‰¹æ€§

### 5.1 å·¥å…·æ‰©å±•æœºåˆ¶

#### **æ’ä»¶ç³»ç»Ÿè®¾è®¡**

```typescript
// packages/backend/src/plugins/plugin-system.ts

/**
 * æ’ä»¶æ¥å£
 */
export interface Plugin {
  name: string;
  version: string;
  description: string;

  // ç”Ÿå‘½å‘¨æœŸé’©å­
  onInstall?(): Promise<void>;
  onEnable?(): Promise<void>;
  onDisable?(): Promise<void>;
  onUninstall?(): Promise<void>;

  // å·¥å…·æ³¨å†Œ
  getTools?(): ToolDefinition[];
  getExecutors?(): Map<string, ToolExecutor>;

  // è‡ªå®šä¹‰è·¯ç”±
  getRoutes?(): Array<{
    method: string;
    path: string;
    handler: (req: any, res: any) => void;
  }>;
}

/**
 * æ’ä»¶ç®¡ç†å™¨
 */
export class PluginManager {
  private plugins: Map<string, Plugin> = new Map();
  private enabledPlugins: Set<string> = new Set();

  /**
   * å®‰è£…æ’ä»¶
   */
  async installPlugin(plugin: Plugin): Promise<void> {
    if (this.plugins.has(plugin.name)) {
      throw new Error(`Plugin already installed: ${plugin.name}`);
    }

    // æ‰§è¡Œå®‰è£…é’©å­
    if (plugin.onInstall) {
      await plugin.onInstall();
    }

    this.plugins.set(plugin.name, plugin);
    console.log(`Plugin installed: ${plugin.name}`);
  }

  /**
   * å¯ç”¨æ’ä»¶
   */
  async enablePlugin(name: string, toolSystem: ToolSystem): Promise<void> {
    const plugin = this.plugins.get(name);
    if (!plugin) {
      throw new Error(`Plugin not found: ${name}`);
    }

    // æ³¨å†Œå·¥å…·
    if (plugin.getTools && plugin.getExecutors) {
      const tools = plugin.getTools();
      const executors = plugin.getExecutors();

      tools.forEach(tool => {
        const executor = executors.get(tool.name);
        if (executor) {
          toolSystem.registerTool(tool, executor);
        }
      });
    }

    // æ‰§è¡Œå¯ç”¨é’©å­
    if (plugin.onEnable) {
      await plugin.onEnable();
    }

    this.enabledPlugins.add(name);
    console.log(`Plugin enabled: ${name}`);
  }

  /**
   * ç¦ç”¨æ’ä»¶
   */
  async disablePlugin(name: string): Promise<void> {
    const plugin = this.plugins.get(name);
    if (!plugin) {
      throw new Error(`Plugin not found: ${name}`);
    }

    // æ‰§è¡Œç¦ç”¨é’©å­
    if (plugin.onDisable) {
      await plugin.onDisable();
    }

    this.enabledPlugins.delete(name);
    console.log(`Plugin disabled: ${name}`);
  }

  /**
   * å¸è½½æ’ä»¶
   */
  async uninstallPlugin(name: string): Promise<void> {
    const plugin = this.plugins.get(name);
    if (!plugin) {
      throw new Error(`Plugin not found: ${name}`);
    }

    // å…ˆç¦ç”¨
    if (this.enabledPlugins.has(name)) {
      await this.disablePlugin(name);
    }

    // æ‰§è¡Œå¸è½½é’©å­
    if (plugin.onUninstall) {
      await plugin.onUninstall();
    }

    this.plugins.delete(name);
    console.log(`Plugin uninstalled: ${name}`);
  }

  /**
   * åˆ—å‡ºæ‰€æœ‰æ’ä»¶
   */
  listPlugins(): Array<{ name: string; enabled: boolean }> {
    return Array.from(this.plugins.keys()).map(name => ({
      name,
      enabled: this.enabledPlugins.has(name)
    }));
  }
}
```

#### **ç¤ºä¾‹æ’ä»¶ï¼šGité›†æˆ**

```typescript
// packages/backend/src/plugins/git-plugin.ts

import { Plugin, ToolDefinition, ToolExecutor } from './plugin-system';
import { simpleGit, SimpleGit } from 'simple-git';

/**
 * Gitæ’ä»¶
 */
export class GitPlugin implements Plugin {
  name = 'git-integration';
  version = '1.0.0';
  description = 'Git version control integration';

  private git: SimpleGit = simpleGit();

  async onInstall(): Promise<void> {
    console.log('Git plugin installed');
  }

  async onEnable(): Promise<void> {
    console.log('Git plugin enabled');
  }

  getTools(): ToolDefinition[] {
    return [
      {
        name: 'git_status',
        description: 'Get git status of the current repository',
        input_schema: {
          type: 'object',
          properties: {},
          required: []
        }
      },
      {
        name: 'git_commit',
        description: 'Create a git commit',
        input_schema: {
          type: 'object',
          properties: {
            message: {
              type: 'string',
              description: 'Commit message'
            },
            files: {
              type: 'array',
              items: { type: 'string' },
              description: 'Files to commit (optional, commits all if not specified)'
            }
          },
          required: ['message']
        }
      },
      {
        name: 'git_diff',
        description: 'Show git diff',
        input_schema: {
          type: 'object',
          properties: {
            file: {
              type: 'string',
              description: 'Specific file to show diff for (optional)'
            }
          }
        }
      }
    ];
  }

  getExecutors(): Map<string, ToolExecutor> {
    return new Map([
      ['git_status', new GitStatusExecutor(this.git)],
      ['git_commit', new GitCommitExecutor(this.git)],
      ['git_diff', new GitDiffExecutor(this.git)]
    ]);
  }
}

/**
 * git statusæ‰§è¡Œå™¨
 */
class GitStatusExecutor implements ToolExecutor {
  constructor(private git: SimpleGit) {}

  async execute(): Promise<string> {
    const status = await this.git.status();

    let output = 'Git Status:\n\n';
    output += `Branch: ${status.current}\n`;
    output += `Ahead: ${status.ahead}, Behind: ${status.behind}\n\n`;

    if (status.modified.length > 0) {
      output += 'Modified files:\n';
      status.modified.forEach(file => output += `  - ${file}\n`);
    }

    if (status.not_added.length > 0) {
      output += '\nUntracked files:\n';
      status.not_added.forEach(file => output += `  - ${file}\n`);
    }

    return output;
  }
}

/**
 * git commitæ‰§è¡Œå™¨
 */
class GitCommitExecutor implements ToolExecutor {
  constructor(private git: SimpleGit) {}

  async execute(params: { message: string; files?: string[] }): Promise<string> {
    if (params.files && params.files.length > 0) {
      // æ·»åŠ æŒ‡å®šæ–‡ä»¶
      await this.git.add(params.files);
    } else {
      // æ·»åŠ æ‰€æœ‰æ–‡ä»¶
      await this.git.add('.');
    }

    // æäº¤
    const result = await this.git.commit(params.message);

    return `Committed: ${result.commit}\nSummary: ${result.summary}`;
  }
}

/**
 * git diffæ‰§è¡Œå™¨
 */
class GitDiffExecutor implements ToolExecutor {
  constructor(private git: SimpleGit) {}

  async execute(params?: { file?: string }): Promise<string> {
    const diff = params?.file
      ? await this.git.diff([params.file])
      : await this.git.diff();

    return diff || 'No changes';
  }
}
```

### 5.2 ä¸Šä¸‹æ–‡ä¼˜åŒ–

#### **æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†å™¨**

```typescript
// packages/backend/src/services/context-manager.ts

import { encoding_for_model } from 'tiktoken';
import { Message } from '../types/message';

/**
 * ä¸Šä¸‹æ–‡ä¼˜åŒ–é…ç½®
 */
interface ContextConfig {
  maxTokens: number;
  reserveTokensForResponse: number;
  priorityRules: PriorityRule[];
}

interface PriorityRule {
  type: 'recent' | 'system' | 'important' | 'error';
  weight: number;
}

/**
 * ä¸Šä¸‹æ–‡ç®¡ç†å™¨
 */
export class ContextManager {
  private config: ContextConfig = {
    maxTokens: 200000,
    reserveTokensForResponse: 8000,
    priorityRules: [
      { type: 'system', weight: 10 },
      { type: 'recent', weight: 9 },
      { type: 'error', weight: 8 },
      { type: 'important', weight: 7 }
    ]
  };

  private encoder = encoding_for_model('gpt-4');

  /**
   * ä¼˜åŒ–ä¸Šä¸‹æ–‡
   */
  async optimize(messages: Message[], tokenBudget?: number): Promise<Message[]> {
    const budget = tokenBudget || (this.config.maxTokens - this.config.reserveTokensForResponse);

    // è®¡ç®—å½“å‰tokenæ•°
    let currentTokens = this.countTokens(messages);

    if (currentTokens <= budget) {
      // ä¸éœ€è¦ä¼˜åŒ–
      return messages;
    }

    console.log(`Context optimization needed: ${currentTokens} > ${budget}`);

    // åˆ†ç¦»systemæ¶ˆæ¯
    const systemMessages = messages.filter(m => m.role === 'system');
    const otherMessages = messages.filter(m => m.role !== 'system');

    // ä¿ç•™systemæ¶ˆæ¯
    let optimizedMessages = [...systemMessages];
    let usedTokens = this.countTokens(systemMessages);

    // æŒ‰ä¼˜å…ˆçº§æ’åºå…¶ä»–æ¶ˆæ¯
    const prioritizedMessages = this.prioritizeMessages(otherMessages);

    // è´ªå¿ƒç®—æ³•ï¼šæŒ‰ä¼˜å…ˆçº§æ·»åŠ æ¶ˆæ¯ï¼Œç›´åˆ°è¾¾åˆ°é¢„ç®—
    for (const msg of prioritizedMessages) {
      const msgTokens = this.countTokens([msg]);
      if (usedTokens + msgTokens <= budget) {
        optimizedMessages.push(msg);
        usedTokens += msgTokens;
      } else {
        // å°è¯•æˆªæ–­æ¶ˆæ¯
        const truncated = this.truncateMessage(msg, budget - usedTokens);
        if (truncated) {
          optimizedMessages.push(truncated);
          break;
        }
      }
    }

    // æŒ‰æ—¶é—´é¡ºåºæ’åº
    optimizedMessages.sort((a, b) =>
      new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()
    );

    const finalTokens = this.countTokens(optimizedMessages);
    console.log(`Context optimized: ${currentTokens} -> ${finalTokens} tokens`);

    return optimizedMessages;
  }

  /**
   * è®¡ç®—tokenæ•°
   */
  private countTokens(messages: Message[]): number {
    let total = 0;
    for (const message of messages) {
      const content = typeof message.content === 'string'
        ? message.content
        : JSON.stringify(message.content);
      total += this.encoder.encode(content).length;
    }
    return total;
  }

  /**
   * æŒ‰ä¼˜å…ˆçº§æ’åºæ¶ˆæ¯
   */
  private prioritizeMessages(messages: Message[]): Message[] {
    return messages
      .map(msg => ({
        message: msg,
        priority: this.calculatePriority(msg)
      }))
      .sort((a, b) => b.priority - a.priority)
      .map(item => item.message);
  }

  /**
   * è®¡ç®—æ¶ˆæ¯ä¼˜å…ˆçº§
   */
  private calculatePriority(message: Message): number {
    let priority = 0;

    // æœ€è¿‘çš„æ¶ˆæ¯ä¼˜å…ˆçº§æ›´é«˜
    const age = Date.now() - new Date(message.timestamp).getTime();
    const recencyScore = Math.max(0, 10 - age / (1000 * 60 * 60)); // 1å°æ—¶å†…çš„æ¶ˆæ¯
    priority += recencyScore * 9;

    // åŒ…å«é”™è¯¯ä¿¡æ¯çš„ä¼˜å…ˆçº§æ›´é«˜
    if (message.content.toString().toLowerCase().includes('error')) {
      priority += 8;
    }

    // åŒ…å«é‡è¦å…³é”®è¯çš„ä¼˜å…ˆçº§æ›´é«˜
    const importantKeywords = ['important', 'critical', 'bug', 'fix'];
    for (const keyword of importantKeywords) {
      if (message.content.toString().toLowerCase().includes(keyword)) {
        priority += 7;
        break;
      }
    }

    return priority;
  }

  /**
   * æˆªæ–­æ¶ˆæ¯
   */
  private truncateMessage(message: Message, maxTokens: number): Message | null {
    if (maxTokens < 100) return null; // å¤ªå°‘ï¼Œæ”¾å¼ƒ

    const content = typeof message.content === 'string'
      ? message.content
      : JSON.stringify(message.content);

    const tokens = this.encoder.encode(content);
    if (tokens.length <= maxTokens) {
      return message;
    }

    // æˆªæ–­å¹¶æ·»åŠ çœç•¥æ ‡è®°
    const truncatedTokens = tokens.slice(0, maxTokens - 10);
    const truncatedText = this.encoder.decode(truncatedTokens) + '\n\n...(truncated)';

    return {
      ...message,
      content: truncatedText
    };
  }
}
```

### 5.3 æ€§èƒ½ä¼˜åŒ–

#### **è¯·æ±‚å»é‡å’Œæ‰¹å¤„ç†**

```typescript
// packages/backend/src/services/request-deduplicator.ts

/**
 * è¯·æ±‚å»é‡å™¨
 */
export class RequestDeduplicator {
  private pendingRequests: Map<string, Promise<any>> = new Map();

  /**
   * å»é‡æ‰§è¡Œ
   */
  async deduplicate<T>(key: string, fn: () => Promise<T>): Promise<T> {
    // æ£€æŸ¥æ˜¯å¦æœ‰ç›¸åŒçš„è¯·æ±‚æ­£åœ¨æ‰§è¡Œ
    if (this.pendingRequests.has(key)) {
      console.log(`Request deduplicated: ${key}`);
      return this.pendingRequests.get(key) as Promise<T>;
    }

    // æ‰§è¡Œæ–°è¯·æ±‚
    const promise = fn().finally(() => {
      // å®Œæˆåç§»é™¤
      this.pendingRequests.delete(key);
    });

    this.pendingRequests.set(key, promise);
    return promise;
  }
}
```

#### **æ™ºèƒ½ç¼“å­˜**

```typescript
// packages/backend/src/services/smart-cache.ts

import { createClient } from 'redis';

/**
 * ç¼“å­˜é…ç½®
 */
interface CacheConfig {
  ttl: number; // ç§’
  maxSize?: number;
}

/**
 * æ™ºèƒ½ç¼“å­˜
 */
export class SmartCache {
  private redis: ReturnType<typeof createClient>;
  private localCache: Map<string, { value: any; expiry: number }> = new Map();

  constructor(redisUrl: string) {
    this.redis = createClient({ url: redisUrl });
    this.redis.connect();

    // å®šæœŸæ¸…ç†æœ¬åœ°ç¼“å­˜
    setInterval(() => this.cleanLocalCache(), 60000);
  }

  /**
   * è·å–ç¼“å­˜
   */
  async get<T>(key: string): Promise<T | null> {
    // å…ˆæŸ¥æœ¬åœ°ç¼“å­˜
    const local = this.localCache.get(key);
    if (local && local.expiry > Date.now()) {
      return local.value;
    }

    // å†æŸ¥Redis
    const value = await this.redis.get(key);
    if (value) {
      const parsed = JSON.parse(value);
      // æ›´æ–°æœ¬åœ°ç¼“å­˜
      this.localCache.set(key, {
        value: parsed,
        expiry: Date.now() + 60000 // æœ¬åœ°ç¼“å­˜1åˆ†é’Ÿ
      });
      return parsed;
    }

    return null;
  }

  /**
   * è®¾ç½®ç¼“å­˜
   */
  async set(key: string, value: any, config: CacheConfig): Promise<void> {
    const serialized = JSON.stringify(value);

    // è®¾ç½®Redisç¼“å­˜
    await this.redis.setEx(key, config.ttl, serialized);

    // è®¾ç½®æœ¬åœ°ç¼“å­˜
    this.localCache.set(key, {
      value,
      expiry: Date.now() + Math.min(config.ttl * 1000, 60000)
    });
  }

  /**
   * åˆ é™¤ç¼“å­˜
   */
  async delete(key: string): Promise<void> {
    await this.redis.del(key);
    this.localCache.delete(key);
  }

  /**
   * æ¸…ç†æœ¬åœ°ç¼“å­˜
   */
  private cleanLocalCache(): void {
    const now = Date.now();
    for (const [key, value] of this.localCache.entries()) {
      if (value.expiry <= now) {
        this.localCache.delete(key);
      }
    }
  }
}
```


apiVersion: v1
kind: Service
metadata:
  name: ai-assistant-backend-service
spec:
  selector:
    app: ai-assistant
    component: backend
  ports:
  - protocol: TCP
    port: 80
    targetPort: 3000
  type: LoadBalancer


## å››ã€å•†ä¸šåŒ–æ€è€ƒ

### 7.1 ç›ˆåˆ©æ¨¡å¼

#### **è®¢é˜…åˆ¶ï¼ˆSaaSï¼‰**

```mermaid
graph LR
    A[å…è´¹ç‰ˆ] --> B[åŸºç¡€ç‰ˆ $9/æœˆ]
    B --> C[ä¸“ä¸šç‰ˆ $29/æœˆ]
    C --> D[ä¼ä¸šç‰ˆ å®šåˆ¶]

    A --> A1[åŸºç¡€åŠŸèƒ½<br/>10æ¬¡/å¤©<br/>ç¤¾åŒºæ”¯æŒ]
    B --> B1[å®Œæ•´åŠŸèƒ½<br/>1000æ¬¡/å¤©<br/>é‚®ä»¶æ”¯æŒ]
    C --> C1[é«˜çº§åŠŸèƒ½<br/>æ— é™æ¬¡æ•°<br/>ä¼˜å…ˆæ”¯æŒ]
    D --> D1[ç§æœ‰éƒ¨ç½²<br/>å®šåˆ¶å¼€å‘<br/>ä¸“å±æ”¯æŒ]

    style A fill:#e8f5e9
    style B fill:#fff4e1
    style C fill:#e1f5ff
    style D fill:#ffe1f5
```

**å®šä»·ç­–ç•¥**:

| ç‰ˆæœ¬ | ä»·æ ¼ | åŠŸèƒ½ | ç›®æ ‡ç”¨æˆ· |
|------|------|------|---------|
| **å…è´¹ç‰ˆ** | $0 | åŸºç¡€AIå¯¹è¯<br/>10æ¬¡/å¤©<br/>ç¤¾åŒºæ”¯æŒ | ä¸ªäººå¼€å‘è€…<br/>å­¦ä¹ ä½¿ç”¨ |
| **åŸºç¡€ç‰ˆ** | $9/æœˆ | å®Œæ•´AIåŠŸèƒ½<br/>1000æ¬¡/å¤©<br/>é‚®ä»¶æ”¯æŒ | ç‹¬ç«‹å¼€å‘è€…<br/>å°å›¢é˜Ÿ |
| **ä¸“ä¸šç‰ˆ** | $29/æœˆ | é«˜çº§åŠŸèƒ½<br/>æ— é™æ¬¡æ•°<br/>ä¼˜å…ˆæ”¯æŒ<br/>APIè®¿é—® | ä¸“ä¸šå¼€å‘è€…<br/>æˆé•¿å›¢é˜Ÿ |
| **ä¼ä¸šç‰ˆ** | å®šåˆ¶ | ç§æœ‰éƒ¨ç½²<br/>å®šåˆ¶å¼€å‘<br/>SLAä¿è¯<br/>ä¸“å±å®¢æœ | å¤§å‹ä¼ä¸š<br/>å®‰å…¨æ•æ„Ÿ |

#### **æŒ‰é‡è®¡è´¹**

```typescript
// æˆæœ¬è®¡ç®—å™¨
class PricingCalculator {
  // AIæˆæœ¬ï¼ˆåŸºäºClaude APIï¼‰
  private AI_COST = {
    input: 3 / 1_000_000,   // $3 per M tokens
    output: 15 / 1_000_000  // $15 per M tokens
  };

  // åˆ©æ¶¦ç‡
  private MARKUP = 2.5;

  /**
   * è®¡ç®—ç”¨æˆ·æˆæœ¬
   */
  calculateUserCost(inputTokens: number, outputTokens: number): number {
    const aiCost =
      inputTokens * this.AI_COST.input +
      outputTokens * this.AI_COST.output;

    return aiCost * this.MARKUP;
  }

  /**
   * ç”Ÿæˆå®šä»·æ–¹æ¡ˆ
   */
  generatePricingTiers() {
    return [
      {
        name: 'æŒ‰éœ€ä»˜è´¹',
        price: '$0.01/1K tokens',
        description: 'é€‚åˆå¶å°”ä½¿ç”¨çš„åœºæ™¯'
      },
      {
        name: 'å¥—é¤åŒ…',
        options: [
          { tokens: 1_000_000, price: '$8', savings: '20%' },
          { tokens: 10_000_000, price: '$60', savings: '40%' },
          { tokens: 100_000_000, price: '$400', savings: '60%' }
        ]
      }
    ];
  }
}
```

#### **æ··åˆæ¨¡å¼ï¼ˆæ¨èï¼‰**

**åŸºç¡€è®¢é˜… + æŒ‰é‡è®¡è´¹ + å¢å€¼æœåŠ¡**:

```
è®¢é˜…è´¹: $19/æœˆ
  â”œâ”€ åŒ…å« 100ä¸‡ tokens/æœˆ
  â”œâ”€ åŸºç¡€åŠŸèƒ½æ— é™ä½¿ç”¨
  â””â”€ æ ‡å‡†æŠ€æœ¯æ”¯æŒ

è¶…é¢ä½¿ç”¨: $0.008/1K tokens

å¢å€¼æœåŠ¡:
  â”œâ”€ è‡ªå®šä¹‰æ¨¡å‹è®­ç»ƒ: $500/æ¬¡
  â”œâ”€ ä¸“å±å·¥å…·å¼€å‘: $1000/ä¸ª
  â”œâ”€ åŸ¹è®­æœåŠ¡: $200/å°æ—¶
  â””â”€ å’¨è¯¢æœåŠ¡: $300/å°æ—¶
```

### 7.2 æˆæœ¬åˆ†æ

#### **è¿è¥æˆæœ¬ä¼°ç®—**

```typescript
/**
 * æœˆåº¦æˆæœ¬è®¡ç®—ï¼ˆ1000ç”¨æˆ·è§„æ¨¡ï¼‰
 */
const MONTHLY_COSTS = {
  // åŸºç¡€è®¾æ–½
  infrastructure: {
    aws_ecs: 500,           // ECS Fargate
    rds_postgres: 200,      // RDS db.t3.large
    elasticache: 100,       // Redis
    s3: 50,                 // å¯¹è±¡å­˜å‚¨
    cloudfront: 100,        // CDN
    subtotal: 950
  },

  // AIæˆæœ¬ï¼ˆå‡è®¾æ¯ç”¨æˆ·æ¯æœˆ100ä¸‡tokensï¼‰
  ai: {
    input_tokens: 1000 * 500_000 * (3 / 1_000_000),   // $1,500
    output_tokens: 1000 * 500_000 * (15 / 1_000_000), // $7,500
    subtotal: 9000
  },

  // äººåŠ›æˆæœ¬
  personnel: {
    developers: 15000,      // 2åå¼€å‘
    support: 5000,          // 1åå®¢æœ
    marketing: 3000,        // è¥é”€
    subtotal: 23000
  },

  // å…¶ä»–
  misc: {
    domain: 20,
    ssl: 0,                 // Let's Encryptå…è´¹
    tools: 200,             // å¼€å‘å·¥å…·è®¢é˜…
    subtotal: 220
  },

  // æ€»è®¡
  total: 33170
};

/**
 * æ”¶å…¥ä¼°ç®—
 */
const MONTHLY_REVENUE = {
  free: 500 * 0,            // 500å…è´¹ç”¨æˆ·
  basic: 300 * 9,           // 300åŸºç¡€ç”¨æˆ· ($9)
  pro: 150 * 29,            // 150ä¸“ä¸šç”¨æˆ· ($29)
  enterprise: 50 * 200,     // 50ä¼ä¸šç”¨æˆ· ($200å¹³å‡)
  total: 0 + 2700 + 4350 + 10000  // $17,050
};

/**
 * ç›ˆåˆ©åˆ†æ
 */
console.log(`
æœˆåº¦æˆæœ¬: $${MONTHLY_COSTS.total}
æœˆåº¦æ”¶å…¥: $${MONTHLY_REVENUE.total}
æœˆåº¦åˆ©æ¶¦: $${MONTHLY_REVENUE.total - MONTHLY_COSTS.total}
åˆ©æ¶¦ç‡: ${((MONTHLY_REVENUE.total - MONTHLY_COSTS.total) / MONTHLY_REVENUE.total * 100).toFixed(2)}%
`);

// è¾“å‡º:
// æœˆåº¦æˆæœ¬: $33,170
// æœˆåº¦æ”¶å…¥: $17,050
// æœˆåº¦åˆ©æ¶¦: -$16,120
// åˆ©æ¶¦ç‡: -94.53%

// ç»“è®º: éœ€è¦è‡³å°‘2000ä¸ªä»˜è´¹ç”¨æˆ·æ‰èƒ½ç›ˆåˆ©
```

#### **ç›ˆäºå¹³è¡¡ç‚¹**

```mermaid
graph LR
    A[ç”¨æˆ·è§„æ¨¡] --> B{ç›ˆäºå¹³è¡¡ç‚¹<br/>çº¦2000ä»˜è´¹ç”¨æˆ·}
    B --> C[æˆæœ¬: $33K/æœˆ]
    B --> D[æ”¶å…¥: $34K/æœˆ]

    C --> C1[å›ºå®šæˆæœ¬: $24K<br/>åŸºç¡€è®¾æ–½+äººåŠ›]
    C --> C2[å˜åŠ¨æˆæœ¬: $9/ç”¨æˆ·<br/>AIæˆæœ¬]

    D --> D1[è®¢é˜…æ”¶å…¥<br/>$15-20/ç”¨æˆ·]
    D --> D2[å¢å€¼æœåŠ¡<br/>$5-10/ç”¨æˆ·]

    style B fill:#ffe1f5
```

**ä¼˜åŒ–ç­–ç•¥**:
1. **é™ä½AIæˆæœ¬**: ä½¿ç”¨æ›´ä¾¿å®œçš„æ¨¡å‹å¤„ç†ç®€å•ä»»åŠ¡
2. **æé«˜å®¢å•ä»·**: å¢åŠ é«˜ä»·å€¼åŠŸèƒ½,æå‡ä»˜è´¹è½¬åŒ–
3. **è§„æ¨¡æ•ˆåº”**: ç”¨æˆ·å¢é•¿åå›ºå®šæˆæœ¬æ‘Šè–„
4. **è‡ªåŠ¨åŒ–**: å‡å°‘äººå·¥å®¢æœ,æé«˜è¿è¥æ•ˆç‡

### 7.3 å¸‚åœºå®šä½

#### **ç›®æ ‡ç”¨æˆ·ç”»åƒ**

```mermaid
graph TB
    A[ç›®æ ‡ç”¨æˆ·] --> B[ä¸ªäººå¼€å‘è€…]
    A --> C[å°å‹å›¢é˜Ÿ]
    A --> D[ä¼ä¸šå®¢æˆ·]

    B --> B1[ç‰¹å¾:<br/>ç‹¬ç«‹å¼€å‘<br/>é¢„ç®—æœ‰é™<br/>è¿½æ±‚æ•ˆç‡]
    B --> B2[ç—›ç‚¹:<br/>ä»£ç è´¨é‡<br/>é‡å¤å·¥ä½œ<br/>æŠ€æœ¯å€ºåŠ¡]
    B --> B3[ä»·å€¼:<br/>æå‡æ•ˆç‡<br/>å­¦ä¹ æ–°æŠ€æœ¯<br/>ä»£ç è´¨é‡]

    C --> C1[ç‰¹å¾:<br/>5-20äºº<br/>å¿«é€Ÿè¿­ä»£<br/>æˆæœ¬æ•æ„Ÿ]
    C --> C2[ç—›ç‚¹:<br/>åä½œæ•ˆç‡<br/>ä»£ç è§„èŒƒ<br/>çŸ¥è¯†ä¼ æ‰¿]
    C --> C3[ä»·å€¼:<br/>å›¢é˜Ÿåä½œ<br/>è´¨é‡ä¿è¯<br/>é™ä½æˆæœ¬]

    D --> D1[ç‰¹å¾:<br/>50+äºº<br/>å®‰å…¨ä¸ºå…ˆ<br/>å®šåˆ¶éœ€æ±‚]
    D --> D2[ç—›ç‚¹:<br/>æ•°æ®å®‰å…¨<br/>åˆè§„è¦æ±‚<br/>ç³»ç»Ÿé›†æˆ]
    D --> D3[ä»·å€¼:<br/>ç§æœ‰éƒ¨ç½²<br/>å®šåˆ¶å¼€å‘<br/>å®‰å…¨ä¿éšœ]

    style A fill:#e1f5ff
```

#### **ç«äº‰åˆ†æ**

| äº§å“ | å®šä½ | ä¼˜åŠ¿ | åŠ£åŠ¿ | æˆ‘ä»¬çš„å·®å¼‚åŒ– |
|------|------|------|------|-------------|
| **GitHub Copilot** | IDEæ’ä»¶ | âœ…å¾®è½¯èƒŒä¹¦<br/>âœ…IDEé›†æˆæ·± | âš ï¸ä»…ä»£ç è¡¥å…¨<br/>âš ï¸ä¸æ”¯æŒä»»åŠ¡æ‰§è¡Œ | ğŸš€å®Œæ•´çš„AI Agent<br/>ğŸš€è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ |
| **Cursor** | AIç¼–è¾‘å™¨ | âœ…ç‹¬ç«‹ç¼–è¾‘å™¨<br/>âœ…ä½“éªŒå¥½ | âš ï¸ç»‘å®šç¼–è¾‘å™¨<br/>âš ï¸å°é—­ç”Ÿæ€ | ğŸš€è·¨ç¼–è¾‘å™¨<br/>ğŸš€å¼€æ”¾æ’ä»¶ç³»ç»Ÿ |
| **Claude Code** | CLIå·¥å…· | âœ…å¼ºå¤§çš„AI<br/>âœ…å·¥å…·è°ƒç”¨ | âš ï¸ä»…CLI<br/>âš ï¸ä¸æ”¯æŒå¤šç”¨æˆ· | ğŸš€Web UI<br/>ğŸš€å›¢é˜Ÿåä½œ<br/>ğŸš€äº‘ç«¯éƒ¨ç½² |
| **Cody** | å¤šç«¯æ”¯æŒ | âœ…æ”¯æŒå¤šIDE<br/>âœ…ä¼ä¸šåŠŸèƒ½ | âš ï¸é…ç½®å¤æ‚<br/>âš ï¸ä»·æ ¼è¾ƒé«˜ | ğŸš€æ˜“ç”¨æ€§<br/>ğŸš€çµæ´»å®šä»· |

**æˆ‘ä»¬çš„æ ¸å¿ƒç«äº‰åŠ›**:
1. ğŸ¯ **å¤šç«¯æ”¯æŒ**: Web + CLI + VS Code + IDEé›†æˆ
2. ğŸ¯ **å¼€æ”¾ç”Ÿæ€**: æ’ä»¶ç³»ç»Ÿã€MCPåè®®
3. ğŸ¯ **çµæ´»éƒ¨ç½²**: äº‘ç«¯SaaS + ç§æœ‰éƒ¨ç½²
4. ğŸ¯ **åˆç†å®šä»·**: ä»å…è´¹åˆ°ä¼ä¸šç‰ˆçš„å®Œæ•´æ–¹æ¡ˆ


## äº”ã€FAQ

### Q1: å¦‚ä½•é€‰æ‹©AIæ¨¡å‹ï¼Ÿ

**A**: æ ¹æ®åœºæ™¯é€‰æ‹©ï¼š
- **ä¸»åŠ›åœºæ™¯**: Claude 3.5 Sonnetï¼ˆæœ€ä½³å¹³è¡¡ï¼‰
- **æˆæœ¬æ•æ„Ÿ**: Deepseek Coderï¼ˆä¾¿å®œ75%ï¼‰
- **ç§æœ‰éƒ¨ç½²**: Ollama + CodeLlamaï¼ˆå®Œå…¨ç¦»çº¿ï¼‰
- **å¤æ‚ä»»åŠ¡**: GPT-4 Turboï¼ˆèƒ½åŠ›æœ€å¼ºï¼‰

å»ºè®®å®ç°æ¨¡å‹åˆ‡æ¢åŠŸèƒ½ï¼Œè®©ç”¨æˆ·æ ¹æ®éœ€æ±‚é€‰æ‹©ã€‚

### Q2: å¦‚ä½•æ§åˆ¶AIæˆæœ¬ï¼Ÿ

**A**: å¤šæ–¹é¢ä¼˜åŒ–ï¼š
1. **æ™ºèƒ½ç¼“å­˜**: ç›¸åŒé—®é¢˜ä¸é‡å¤è°ƒç”¨
2. **ä¸Šä¸‹æ–‡ä¼˜åŒ–**: å‡å°‘æ— ç”¨token
3. **æ¨¡å‹åˆ†çº§**: ç®€å•ä»»åŠ¡ç”¨ä¾¿å®œæ¨¡å‹
4. **æ‰¹é‡å¤„ç†**: åˆå¹¶å¤šä¸ªå°è¯·æ±‚
5. **ç”¨æˆ·é™åˆ¶**: é™åˆ¶å…è´¹ç”¨æˆ·è°ƒç”¨é¢‘ç‡

### Q3: å¦‚ä½•ä¿è¯æ•°æ®å®‰å…¨ï¼Ÿ

**A**: å‚è€ƒç¬¬15ç¯‡ã€Šå®‰å…¨æœºåˆ¶è®¾è®¡ã€‹ï¼š
- âœ… æ‰€æœ‰æ•°æ®åŠ å¯†å­˜å‚¨
- âœ… HTTPSå¼ºåˆ¶ä¼ è¾“
- âœ… ä¸¥æ ¼çš„æƒé™æ§åˆ¶
- âœ… æ•æ„Ÿæ“ä½œå®¡è®¡æ—¥å¿—
- âœ… æ”¯æŒç§æœ‰éƒ¨ç½²ï¼ˆä¼ä¸šç‰ˆï¼‰

### Q4: å¦‚ä½•æé«˜å“åº”é€Ÿåº¦ï¼Ÿ

**A**:
1. **æµå¼å“åº”**: è¾¹ç”Ÿæˆè¾¹å±•ç¤º
2. **æ™ºèƒ½ç¼“å­˜**: ç¼“å­˜å¸¸è§æŸ¥è¯¢
3. **å¹¶å‘å¤„ç†**: å·¥å…·å¹¶è¡Œæ‰§è¡Œ
4. **CDNåŠ é€Ÿ**: é™æ€èµ„æºåˆ†å‘
5. **æ•°æ®åº“ä¼˜åŒ–**: ç´¢å¼•å’ŒæŸ¥è¯¢ä¼˜åŒ–

### Q5: å¦‚ä½•æ”¯æŒç¦»çº¿ä½¿ç”¨ï¼Ÿ

**A**:
- **æ–¹æ¡ˆ1**: æ¡Œé¢åº”ç”¨ + æœ¬åœ°AIæ¨¡å‹ï¼ˆOllamaï¼‰
- **æ–¹æ¡ˆ2**: PWA + Service Workerç¼“å­˜
- **æ–¹æ¡ˆ3**: æ··åˆæ¨¡å¼ï¼ˆåœ¨çº¿ä¼˜å…ˆï¼Œç¦»çº¿é™çº§ï¼‰


## æ‰©å±•é˜…è¯»

**å®˜æ–¹æ–‡æ¡£**:
- [Anthropic APIæ–‡æ¡£](https://docs.anthropic.com/)
- [OpenAI APIæ–‡æ¡£](https://platform.openai.com/docs)
- [MCPåè®®è§„èŒƒ](https://modelcontextprotocol.io/)

**å¼€æºé¡¹ç›®**:
- [Claude Code](https://docs.claude.com/claude-code)
- [Continue.dev](https://github.com/continuedev/continue)
- [Aider](https://github.com/paul-gauthier/aider)

**å­¦ä¹ èµ„æº**:
- [LangChainæ–‡æ¡£](https://docs.langchain.com/)
- [AI Agentè®¾è®¡æ¨¡å¼](https://www.deeplearning.ai/short-courses/ai-agents-in-langgraph/)
- [Promptå·¥ç¨‹æŒ‡å—](https://www.promptingguide.ai/)

**å•†ä¸šåˆ†æ**:
- [AIå¼€å‘å·¥å…·å¸‚åœºæŠ¥å‘Š](https://www.forrester.com/)
- [GitHub Copilotæ¡ˆä¾‹ç ”ç©¶](https://github.blog/)
- [AIç¼–ç¨‹åŠ©æ‰‹ç”¨æˆ·è°ƒç ”](https://stackoverflow.blog/)

---

**ä½œè€…**: Claude Codeæ¶æ„ç³»åˆ—
**ç³»åˆ—å®Œç»“**: 2025-01-14
**æ€»å­—æ•°**: çº¦120,000å­—
**æ€»ä»£ç è¡Œæ•°**: çº¦15,000è¡Œ

**æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼** â¤ï¸

å¦‚æœè¿™ä¸ªç³»åˆ—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ï¼š
- â­ Staré¡¹ç›®
- ğŸ”„ åˆ†äº«ç»™æœ‹å‹
- ğŸ’¬ åŠ å…¥ç¤¾åŒºè®¨è®º
- ğŸ› æäº¤é—®é¢˜å’Œå»ºè®®

**è®©æˆ‘ä»¬ä¸€èµ·æ¨åŠ¨AIç¼–ç¨‹å·¥å…·çš„å‘å±•ï¼** ğŸš€
